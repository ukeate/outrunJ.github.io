<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="ThingsBoard # # java, 社区版、企业版 文档 github.com/thingsboard/thingsboard thingsboard.io/docs localhost:8080/swagger-ui.html # 本地swagger 安装 docker docker run -it -p 9090:9090 -p 1883:1883 -p 5683:5683/udp -v ~/.mytb-data:/data -v ~/.mytb-logs:/var/log/thingsboard --name mytb thingsboard/tb-postgres maven 确定ui/pom.xml中&lt;nodeVersion&gt; mvn install -DskipTests 配置 application zk ZOOKEEPER_ENABLED ZOOKEEPER_URL cassandra CASSANDRA_URL CASSANDRA_USERNAME CASSANDRA_PASSWORD redis REDIS_HOST REDIS_PORT REDIS_DB REDIS_PASSWORD postgresql SPRING_DATASOURCE_URL SPRING_DATASOURCE_USERNAME SPRING_DATASOURCE_PASSWORD kafka TB_KAFKA_SERVERS 运行 application server transport http demo数据 admin sysadmin@thingsboard.org sysadmin tenant tenant@thingsboard.org tenant customer customer@thingsboard.org或customerA@thingsboard.org customer customerB@thingsboard.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="" />
<meta property="og:description" content="ThingsBoard # # java, 社区版、企业版 文档 github.com/thingsboard/thingsboard thingsboard.io/docs localhost:8080/swagger-ui.html # 本地swagger 安装 docker docker run -it -p 9090:9090 -p 1883:1883 -p 5683:5683/udp -v ~/.mytb-data:/data -v ~/.mytb-logs:/var/log/thingsboard --name mytb thingsboard/tb-postgres maven 确定ui/pom.xml中&lt;nodeVersion&gt; mvn install -DskipTests 配置 application zk ZOOKEEPER_ENABLED ZOOKEEPER_URL cassandra CASSANDRA_URL CASSANDRA_USERNAME CASSANDRA_PASSWORD redis REDIS_HOST REDIS_PORT REDIS_DB REDIS_PASSWORD postgresql SPRING_DATASOURCE_URL SPRING_DATASOURCE_USERNAME SPRING_DATASOURCE_PASSWORD kafka TB_KAFKA_SERVERS 运行 application server transport http demo数据 admin sysadmin@thingsboard.org sysadmin tenant tenant@thingsboard.org tenant customer customer@thingsboard.org或customerA@thingsboard.org customer customerB@thingsboard." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://runout.run/docs/architect/strategy/iot/framework/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2022-11-14T20:22:20+08:00" />

<title>Framework | outrun的笔记</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.c58292d36b18b675680ab9baea2029204537b839ea72f258746ec0f32ce8d6c8.css" integrity="sha256-xYKS02sYtnVoCrm66iApIEU3uDnqcvJYdG7A8yzo1sg=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.784e46818d1b41815dbafa8dccd3690e3de1258309b5e95ffb6172d1b7475e68.js" integrity="sha256-eE5GgY0bQYFduvqNzNNpDj3hJYMJtelf&#43;2Fy0bdHXmg=" crossorigin="anonymous"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-154152836-1', 'auto');
	
	ga('send', 'pageview');
}
</script><!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  <script data-ad-client="ca-pub-6239994681364905" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<meta name="baidu_union_verify" content="aacbc30462cce84b2333063d99284e3b">
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/logo.png" alt="Logo" /><span>outrun的笔记</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  <ul>
<li><a href="/"><strong>介绍</strong></a></li>
<li><a href="/docs/architect"><strong>架构</strong></a>
<ul>
<li><a href="/docs/architect/method"><strong><strong>规划与方法</strong></strong></a>
<ul>
<li><a href="/docs/architect/method/product_plan">产品规划</a></li>
<li><a href="/docs/architect/method/advice_plan">咨询规划</a></li>
<li><a href="/docs/architect/method/test_plan">测试规划</a></li>
<li><a href="/docs/architect/method/architect">服务治理</a></li>
<li><a href="/docs/architect/method/ops_plan">运维规划</a></li>
<li><a href="/docs/architect/method/project_plan">项目规划</a></li>
<li><a href="/docs/architect/method/code_plan">代码规划</a></li>
</ul>
</li>
<li><a href="/docs/architect/strategy"><strong><strong>战略技术方案</strong></strong></a>
<ul>
<li><a href="/docs/architect/strategy/middle_platform"><strong><strong>中台</strong></strong></a></li>
<li><a href="/docs/architect/strategy/datalake"><strong><strong>湖仓一体</strong></strong></a>
<ul>
<li><a href="/docs/architect/strategy/big_data/ecology">生态体系</a></li>
</ul>
</li>
<li><a href="/docs/architect/strategy/ai"><strong><strong>人工智能</strong></strong></a></li>
<li><a href="/docs/architect/strategy/iot"><strong><strong>物联网</strong></strong></a>
<ul>
<li><a href="/docs/architect/strategy/iot/framework">框架</a></li>
</ul>
</li>
<li><a href="/docs/architect/strategy/block_chain"><strong><strong>区块链</strong></strong></a></li>
<li><a href="/docs/architect/strategy/meta"><strong><strong>元宇宙Web3.0</strong></strong></a>
<ul>
<li><a href="/docs/architect/strategy/meta/media">媒体</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/docs/architect/project"><strong><strong>工程设计原则</strong></strong></a>
<ul>
<li><a href="/docs/architect/project/ddd">DDD</a></li>
<li><a href="/docs/architect/project/frontend">前端设计</a></li>
</ul>
</li>
<li><a href="/docs/architect/code"><strong><strong>代码原则</strong></strong></a>
<ul>
<li><a href="/docs/architect/code/design_mode">设计模式</a></li>
<li><a href="/docs/architect/code/security">安全/协议</a></li>
</ul>
</li>
<li><a href="/docs/architect/manage"><strong><strong>管理</strong></strong></a>
<ul>
<li><a href="/docs/architect/manage/organize"><strong><strong>组织</strong></strong></a>
<ul>
<li><a href="/docs/architect/manage/organize/people">人员</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/docs/architect/summary">这些年我做过的技术</a></li>
</ul>
</li>
<li><a href="/docs/tool"><strong>工具</strong></a>
<ul>
<li><a href="/docs/tool/linux"><strong><strong>Linux系统</strong></strong></a>
<ul>
<li><a href="/docs/tool/linux/linux_tool">Linux工具</a></li>
<li><a href="/docs/tool/linux/scene">Linux场景</a></li>
<li><a href="/docs/tool/linux/linux_program">Linux系统编程</a></li>
</ul>
</li>
<li><a href="/docs/tool/ops"><strong><strong>运维工具</strong></strong></a>
<ul>
<li><a href="/docs/tool/ops/monitor">监控指标</a></li>
<li><a href="/docs/tool/ops/docker">Docker</a></li>
<li><a href="/docs/tool/ops/k8s">Kubernetes</a></li>
</ul>
</li>
<li><a href="/docs/tool/develop"><strong><strong>开发工具</strong></strong></a>
<ul>
<li><a href="/docs/tool/develop/vim">Vim</a></li>
<li><a href="/docs/tool/develop/eclipse">Eclipse</a></li>
<li><a href="/docs/tool/develop/apple">Apple</a></li>
<li><a href="/docs/tool/develop/jetbrains">Jetbrains</a></li>
</ul>
</li>
<li><a href="/docs/tool/test"><strong><strong>测试工具</strong></strong></a>
<ul>
<li><a href="/docs/tool/test/debug">代码调试</a></li>
</ul>
</li>
<li><a href="/docs/tool/product"><strong><strong>产品工具</strong></strong></a>
<ul>
<li><a href="/docs/tool/product/enterprise_system">企业级系统</a></li>
<li><a href="/docs/tool/product/framework">服务与框架</a></li>
</ul>
</li>
<li><a href="/docs/tool/physics"><strong><strong>实物工具</strong></strong></a></li>
</ul>
</li>
<li><a href="/docs/middleware"><strong>中间件</strong></a>
<ul>
<li><a href="/docs/middleware/container"><strong><strong>容器</strong></strong></a>
<ul>
<li><a href="/docs/middleware/container/nginx">Nginx</a></li>
<li><a href="/docs/middleware/container/nodejs">Node.js</a></li>
</ul>
</li>
<li><a href="/docs/middleware/distributed"><strong><strong>分布式</strong></strong></a>
<ul>
<li><a href="/docs/middleware/distributed/spring_cloud">Spring Cloud</a></li>
</ul>
</li>
<li><a href="/docs/middleware/library"><strong><strong>库</strong></strong></a>
<ul>
<li><a href="/docs/middleware/library/hibernate">Hibernate</a></li>
</ul>
</li>
<li><a href="/docs/middleware/library_frontend"><strong><strong>前端库</strong></strong></a>
<ul>
<li><a href="/docs/middleware/library_frontend/jquery">JQuery</a></li>
<li><a href="/docs/middleware/library_frontend/bootstrap">Bootstrap</a></li>
<li><a href="/docs/middleware/library_frontend/angular">Angular</a></li>
<li><a href="/docs/middleware/library_frontend/react">React</a></li>
<li><a href="/docs/middleware/library_frontend/threejs">Three.js</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/docs/db"><strong>数据库</strong></a>
<ul>
<li><a href="/docs/db/mongodb">MongoDB</a></li>
<li><a href="/docs/db/mysql">Mysql</a></li>
<li><a href="/docs/db/oracle">Oracle</a></li>
<li><a href="/docs/db/postgresql">PgSQL</a></li>
<li><a href="/docs/db/redis">Redis</a></li>
<li><a href="/docs/db/elasticsearch">Elasticsearch</a></li>
</ul>
</li>
<li><a href="/docs/pl"><strong>语言</strong></a>
<ul>
<li><a href="/docs/pl/principle">原理</a></li>
<li><a href="/docs/pl/java"><strong><strong>Java</strong></strong></a>
<ul>
<li><a href="/docs/pl/java/jvm">JVM</a></li>
<li><a href="/docs/pl/java/collection">Java Collection</a></li>
<li><a href="/docs/pl/java/juc">Java Concurrent</a></li>
<li><a href="/docs/pl/java/spring">Spring</a></li>
<li><a href="/docs/pl/java/rxjava">RxJava</a></li>
<li><a href="/docs/pl/java/javaweb">JavaWeb</a></li>
</ul>
</li>
<li><a href="/docs/pl/go">GO</a></li>
<li><a href="/docs/pl/js">JS</a></li>
<li><a href="/docs/pl/python">Python</a></li>
<li><a href="/docs/pl/haskell">Haskell</a></li>
<li><a href="/docs/pl/clojure">Clojure</a></li>
<li><a href="/docs/pl/markup_language"><strong><strong>标记语言</strong></strong></a>
<ul>
<li><a href="/docs/pl/markup_language/html">HTML</a></li>
<li><a href="/docs/pl/markup_language/css">CSS</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/docs/basic"><strong>基本功</strong></a>
<ul>
<li><a href="/docs/basic/algorithm"><strong><strong>算法</strong></strong></a>
<ul>
<li><a href="/docs/basic/algorithm/math">数学</a></li>
<li><a href="/docs/basic/algorithm/thought">思想</a></li>
<li><a href="/docs/basic/algorithm/data_structure">数据结构</a></li>
</ul>
</li>
<li><a href="/docs/basic/computer"><strong><strong>计算机</strong></strong></a>
<ul>
<li><a href="/docs/basic/computer/principle">原理</a></li>
<li><a href="/docs/basic/computer/performance">性能</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="/docs/cache"><strong>Cache</strong></a>
<ul>
<li><a href="/docs/cache/ops">运维</a></li>
<li><a href="/docs/cache/template">模板配置</a></li>
<li><a href="/docs/cache/soft_arch">软考</a></li>
</ul>
</li>
<li><a href="/docs/misc"><strong>Misc</strong></a></li>
<li><a href="/posts"><strong>Posts</strong></a></li>
</ul>










</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Framework</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#thingsboard">ThingsBoard</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="thingsboard">
  ThingsBoard
  <a class="anchor" href="#thingsboard">#</a>
</h1>
<pre><code># java, 社区版、企业版
文档
    github.com/thingsboard/thingsboard
    thingsboard.io/docs
    localhost:8080/swagger-ui.html      # 本地swagger
安装
    docker
        docker run -it -p 9090:9090 -p 1883:1883 -p 5683:5683/udp -v ~/.mytb-data:/data -v ~/.mytb-logs:/var/log/thingsboard --name mytb thingsboard/tb-postgres
    maven
        确定ui/pom.xml中&lt;nodeVersion&gt;
        mvn install -DskipTests
    配置
        application
            zk
                ZOOKEEPER_ENABLED
                ZOOKEEPER_URL
            cassandra
                CASSANDRA_URL
                CASSANDRA_USERNAME
                CASSANDRA_PASSWORD
            redis
                REDIS_HOST
                REDIS_PORT
                REDIS_DB
                REDIS_PASSWORD
            postgresql
                SPRING_DATASOURCE_URL
                SPRING_DATASOURCE_USERNAME
                SPRING_DATASOURCE_PASSWORD
            kafka
                TB_KAFKA_SERVERS
    运行
        application
            server
        transport
            http
    demo数据
        admin
            sysadmin@thingsboard.org    sysadmin
        tenant
            tenant@thingsboard.org  tenant
        customer
            customer@thingsboard.org或customerA@thingsboard.org  customer
            customerB@thingsboard.org   customer
            customerC@thingsboard.org   customer
        device
            A1, A2, A3  A1_TEST_TOKEN,...   customerA
            B1  B1_TEST_TOKEN   customerB
            C1  C1_TEST_TOKEN   customerC
            'DHT11 Demo Device'     DHT11_DEMO_TOKEN
            'Raspberry Pi Demo Device'  RASPBERRY_PI_DEMO_TOKEN
包结构
    application                         # 可改, 网关
        server
            install
            config                      # 同源策略、swagger、websocket、消息、安全
            exception
            controller                  # 页面调用
            service
            actors
                service
                    DefaultActorService
                        actorContext
                            actorService(this)
                            actorSystem
                            appActor
                            statsActor
                        rpcManagerActor
    common                              # 不可改, 功能代理
        data                            # 数据结构
        message                         # 消息类型
        transport                       # 客户端调用
    dao                                 # 可改, 业务, 适配db
        model                           # 数据库对象
        resources
            sql                         # 表结构
    netty-mqtt                          # 不可改, 数据通信协议
    rule-engine                         # 不可改, 规则引擎
    transport                           # 不可改, 设备端运行
        http                            # 启动http传输协议
        coap
        mqtt
    tools                               # 可改, 工具
    ui                                  # 可改, 页面, angular, react, webpack
    docker                              # 不可改, 打包
    msa                                 # 不可改，分布式
        black-box-tests                 # 黑盒测试
        js-executor                     # 执行js
    log
    img         
模块
    application
        common
            data                        # 数据结构
            message                     # 消息结构
            transport                   # 接口结构，适配客户端
    dao                                 # 交互data, 兼容不同db
    tools
        extensions
            kafka
            mqtt
            rabbitmq
            rest-api-call
        extensions-api
            action
            filter
            plugin
            processor
        extensions-core                 # 实现公用extensions-api
    transport
        http                            # rest
        coap                            # californium
        mqtt                            # netty
    规则引擎                             # 基于actors执行
        filters
        processors
        action
    ui                                  # node.js + yarn
表结构
    tenant
    customer                            # 关联tenant
    tb_user                             # user信息、角色
    user_credentials                    # user密码
    admin_settings                      # admin信息, key value形式
    audit_log                           # 登录日志

    asset
    entity_view     
    attribute_kv                        # entity attribute
    component_descriptor                # node类

    device                              # 设备, label
    device_credentials                  # 设备ACCESS_TOKEN
    ts_kv                               # 设备事件
    ts_kv_latest                        # 设备当前状态

    rule_chain                          # rule root chain
    rule_node                           # rule节点
    relation                            # rule关系
    event                               # rule事件
    alarm                               # alarm事件

    dashboard                           # dashboard设置
    widget_type                         # widget, 别名
    widgets_bundle
api
    host:port/api/v1/$ACCESS_TOKEN/
        telementry                      # 上传遥测数据
            post {&quot;key1&quot;:&quot;value1&quot;}
            post [{&quot;key1&quot;:&quot;value1&quot;}]
            post {&quot;ts&quot;:1451649600512, &quot;values&quot;:{&quot;key1&quot;:&quot;value1&quot;}}
        attributes
            post {&quot;attribute1&quot;:&quot;value1&quot;}          # 更新属性
            get                         # 请求属性
        attributes/updates
            get ?timeout=20000          # 订阅属性
        rpc
            get ?timeout=20000          # 要求订阅，返回id, method, params
            post {&quot;method&quot;: &quot;getTime&quot;, &quot;params&quot;:{}}     # 执行method
        rpc/{$id}
            post
        claim                           # 用户认领设备
            post
服务架构
产品架构
    设备接入: MQTT、CoAP、HTTP
    规则引擎                             # 处理设备消息
        消息(message)
            设备传入数据
            设备生命周期事件
            rest api事件
            rpc请求
        规则节点(node)                   # 过滤消息
            filter
            enrichment
            transformation
            action
            external
            rule chain
        规则链                           # 连接节点
    核心服务
        设备认证: token、X.509
        规则和插件
        多租户(tenant)
            客户
                资产
                设备
        部件(widget)仪表盘(dashboard)
            alarm
            实体视图
                设备即服务(DaaS)
                共享资产、设备
                传感器等权限
        告警和事件
    网关: rest api, websocket
    actor模型: 用于并发
    集群: zookeeper服务发现, 一致性哈希
    安全: SSL
    第三方
        akka
        zookeeper
        grpc
        cassandra

    system
        general
        mail
        security
功能模块
    admin
    tenant
        rule chain
            filter
            enrichment
            transformation
            action
            *analytics
            external
            rule chain
        *data converters
        *integrations
        *roles
        *customers hierarchy
        *user groups
        customers
        *customer groups
        assets
        *asset groups
        devices
        *device groups
        entity views
        *entity view groups
        widgets library
        dashboards
        *dashboard groups
        *scheduler
            report
            send rpc
            update attributes
        *white labeling
            main server
            mail templates
            custom translation
            custom menu
            white labeling
            login white labeling
            self registration
        audit logs
    entities
        包含
            tenants
            customers
            users
            devices
            assets
            alarms
            dashboards
            rule node
            rule chain
        操作
            detail
            assigned to customer
            attributes
                client
                server
                shared
            telemetry
            alarms
            events
            relations
            audit logs</code></pre>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/outrunJ/hugo-blog/commit/2f21611cabda6ad61a59703a1951538430601829" title='Last modified by outrun | Nov 14, 2022' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>Nov 14, 2022</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/outrunJ/hugo-blog/tree/master/content/content/docs/architect/strategy/iot/framework.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#thingsboard">ThingsBoard</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












