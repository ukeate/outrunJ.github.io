<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  ThingsBoard
  #

# java, 社区版、企业版
文档
    github.com/thingsboard/thingsboard
    thingsboard.io/docs
    localhost:8080/swagger-ui.html      # 本地swagger
安装
    docker
        docker run -it -p 9090:9090 -p 1883:1883 -p 5683:5683/udp -v ~/.mytb-data:/data -v ~/.mytb-logs:/var/log/thingsboard --name mytb thingsboard/tb-postgres
    maven
        确定ui/pom.xml中&lt;nodeVersion&gt;
        mvn install -DskipTests
    配置
        application
            zk
                ZOOKEEPER_ENABLED
                ZOOKEEPER_URL
            cassandra
                CASSANDRA_URL
                CASSANDRA_USERNAME
                CASSANDRA_PASSWORD
            redis
                REDIS_HOST
                REDIS_PORT
                REDIS_DB
                REDIS_PASSWORD
            postgresql
                SPRING_DATASOURCE_URL
                SPRING_DATASOURCE_USERNAME
                SPRING_DATASOURCE_PASSWORD
            kafka
                TB_KAFKA_SERVERS
    运行
        application
            server
        transport
            http
    demo数据
        admin
            sysadmin@thingsboard.org    sysadmin
        tenant
            tenant@thingsboard.org  tenant
        customer
            customer@thingsboard.org或customerA@thingsboard.org  customer
            customerB@thingsboard.org   customer
            customerC@thingsboard.org   customer
        device
            A1, A2, A3  A1_TEST_TOKEN,...   customerA
            B1  B1_TEST_TOKEN   customerB
            C1  C1_TEST_TOKEN   customerC
            &#39;DHT11 Demo Device&#39;     DHT11_DEMO_TOKEN
            &#39;Raspberry Pi Demo Device&#39;  RASPBERRY_PI_DEMO_TOKEN
包结构
    application                         # 可改, 网关
        server
            install
            config                      # 同源策略、swagger、websocket、消息、安全
            exception
            controller                  # 页面调用
            service
            actors
                service
                    DefaultActorService
                        actorContext
                            actorService(this)
                            actorSystem
                            appActor
                            statsActor
                        rpcManagerActor
    common                              # 不可改, 功能代理
        data                            # 数据结构
        message                         # 消息类型
        transport                       # 客户端调用
    dao                                 # 可改, 业务, 适配db
        model                           # 数据库对象
        resources
            sql                         # 表结构
    netty-mqtt                          # 不可改, 数据通信协议
    rule-engine                         # 不可改, 规则引擎
    transport                           # 不可改, 设备端运行
        http                            # 启动http传输协议
        coap
        mqtt
    tools                               # 可改, 工具
    ui                                  # 可改, 页面, angular, react, webpack
    docker                              # 不可改, 打包
    msa                                 # 不可改，分布式
        black-box-tests                 # 黑盒测试
        js-executor                     # 执行js
    log
    img         
模块
    application
        common
            data                        # 数据结构
            message                     # 消息结构
            transport                   # 接口结构，适配客户端
    dao                                 # 交互data, 兼容不同db
    tools
        extensions
            kafka
            mqtt
            rabbitmq
            rest-api-call
        extensions-api
            action
            filter
            plugin
            processor
        extensions-core                 # 实现公用extensions-api
    transport
        http                            # rest
        coap                            # californium
        mqtt                            # netty
    规则引擎                             # 基于actors执行
        filters
        processors
        action
    ui                                  # node.js &#43; yarn
表结构
    tenant
    customer                            # 关联tenant
    tb_user                             # user信息、角色
    user_credentials                    # user密码
    admin_settings                      # admin信息, key value形式
    audit_log                           # 登录日志

    asset
    entity_view     
    attribute_kv                        # entity attribute
    component_descriptor                # node类

    device                              # 设备, label
    device_credentials                  # 设备ACCESS_TOKEN
    ts_kv                               # 设备事件
    ts_kv_latest                        # 设备当前状态

    rule_chain                          # rule root chain
    rule_node                           # rule节点
    relation                            # rule关系
    event                               # rule事件
    alarm                               # alarm事件

    dashboard                           # dashboard设置
    widget_type                         # widget, 别名
    widgets_bundle
api
    host:port/api/v1/$ACCESS_TOKEN/
        telementry                      # 上传遥测数据
            post {&quot;key1&quot;:&quot;value1&quot;}
            post [{&quot;key1&quot;:&quot;value1&quot;}]
            post {&quot;ts&quot;:1451649600512, &quot;values&quot;:{&quot;key1&quot;:&quot;value1&quot;}}
        attributes
            post {&quot;attribute1&quot;:&quot;value1&quot;}          # 更新属性
            get                         # 请求属性
        attributes/updates
            get ?timeout=20000          # 订阅属性
        rpc
            get ?timeout=20000          # 要求订阅，返回id, method, params
            post {&quot;method&quot;: &quot;getTime&quot;, &quot;params&quot;:{}}     # 执行method
        rpc/{$id}
            post
        claim                           # 用户认领设备
            post
服务架构
产品架构
    设备接入: MQTT、CoAP、HTTP
    规则引擎                             # 处理设备消息
        消息(message)
            设备传入数据
            设备生命周期事件
            rest api事件
            rpc请求
        规则节点(node)                   # 过滤消息
            filter
            enrichment
            transformation
            action
            external
            rule chain
        规则链                           # 连接节点
    核心服务
        设备认证: token、X.509
        规则和插件
        多租户(tenant)
            客户
                资产
                设备
        部件(widget)仪表盘(dashboard)
            alarm
            实体视图
                设备即服务(DaaS)
                共享资产、设备
                传感器等权限
        告警和事件
    网关: rest api, websocket
    actor模型: 用于并发
    集群: zookeeper服务发现, 一致性哈希
    安全: SSL
    第三方
        akka
        zookeeper
        grpc
        cassandra

    system
        general
        mail
        security
功能模块
    admin
    tenant
        rule chain
            filter
            enrichment
            transformation
            action
            *analytics
            external
            rule chain
        *data converters
        *integrations
        *roles
        *customers hierarchy
        *user groups
        customers
        *customer groups
        assets
        *asset groups
        devices
        *device groups
        entity views
        *entity view groups
        widgets library
        dashboards
        *dashboard groups
        *scheduler
            report
            send rpc
            update attributes
        *white labeling
            main server
            mail templates
            custom translation
            custom menu
            white labeling
            login white labeling
            self registration
        audit logs
    entities
        包含
            tenants
            customers
            users
            devices
            assets
            alarms
            dashboards
            rule node
            rule chain
        操作
            detail
            assigned to customer
            attributes
                client
                server
                shared
            telemetry
            alarms
            events
            relations
            audit logs
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://ukeate.com/docs/architect/strategy/iot/framework/">
  <meta property="og:site_name" content="ukeate的笔记">
  <meta property="og:title" content="ukeate的笔记">
  <meta property="og:description" content="ThingsBoard # # java, 社区版、企业版 文档 github.com/thingsboard/thingsboard thingsboard.io/docs localhost:8080/swagger-ui.html # 本地swagger 安装 docker docker run -it -p 9090:9090 -p 1883:1883 -p 5683:5683/udp -v ~/.mytb-data:/data -v ~/.mytb-logs:/var/log/thingsboard --name mytb thingsboard/tb-postgres maven 确定ui/pom.xml中&lt;nodeVersion&gt; mvn install -DskipTests 配置 application zk ZOOKEEPER_ENABLED ZOOKEEPER_URL cassandra CASSANDRA_URL CASSANDRA_USERNAME CASSANDRA_PASSWORD redis REDIS_HOST REDIS_PORT REDIS_DB REDIS_PASSWORD postgresql SPRING_DATASOURCE_URL SPRING_DATASOURCE_USERNAME SPRING_DATASOURCE_PASSWORD kafka TB_KAFKA_SERVERS 运行 application server transport http demo数据 admin sysadmin@thingsboard.org sysadmin tenant tenant@thingsboard.org tenant customer customer@thingsboard.org或customerA@thingsboard.org customer customerB@thingsboard.org customer customerC@thingsboard.org customer device A1, A2, A3 A1_TEST_TOKEN,... customerA B1 B1_TEST_TOKEN customerB C1 C1_TEST_TOKEN customerC &#39;DHT11 Demo Device&#39; DHT11_DEMO_TOKEN &#39;Raspberry Pi Demo Device&#39; RASPBERRY_PI_DEMO_TOKEN 包结构 application # 可改, 网关 server install config # 同源策略、swagger、websocket、消息、安全 exception controller # 页面调用 service actors service DefaultActorService actorContext actorService(this) actorSystem appActor statsActor rpcManagerActor common # 不可改, 功能代理 data # 数据结构 message # 消息类型 transport # 客户端调用 dao # 可改, 业务, 适配db model # 数据库对象 resources sql # 表结构 netty-mqtt # 不可改, 数据通信协议 rule-engine # 不可改, 规则引擎 transport # 不可改, 设备端运行 http # 启动http传输协议 coap mqtt tools # 可改, 工具 ui # 可改, 页面, angular, react, webpack docker # 不可改, 打包 msa # 不可改，分布式 black-box-tests # 黑盒测试 js-executor # 执行js log img 模块 application common data # 数据结构 message # 消息结构 transport # 接口结构，适配客户端 dao # 交互data, 兼容不同db tools extensions kafka mqtt rabbitmq rest-api-call extensions-api action filter plugin processor extensions-core # 实现公用extensions-api transport http # rest coap # californium mqtt # netty 规则引擎 # 基于actors执行 filters processors action ui # node.js &#43; yarn 表结构 tenant customer # 关联tenant tb_user # user信息、角色 user_credentials # user密码 admin_settings # admin信息, key value形式 audit_log # 登录日志 asset entity_view attribute_kv # entity attribute component_descriptor # node类 device # 设备, label device_credentials # 设备ACCESS_TOKEN ts_kv # 设备事件 ts_kv_latest # 设备当前状态 rule_chain # rule root chain rule_node # rule节点 relation # rule关系 event # rule事件 alarm # alarm事件 dashboard # dashboard设置 widget_type # widget, 别名 widgets_bundle api host:port/api/v1/$ACCESS_TOKEN/ telementry # 上传遥测数据 post {&#34;key1&#34;:&#34;value1&#34;} post [{&#34;key1&#34;:&#34;value1&#34;}] post {&#34;ts&#34;:1451649600512, &#34;values&#34;:{&#34;key1&#34;:&#34;value1&#34;}} attributes post {&#34;attribute1&#34;:&#34;value1&#34;} # 更新属性 get # 请求属性 attributes/updates get ?timeout=20000 # 订阅属性 rpc get ?timeout=20000 # 要求订阅，返回id, method, params post {&#34;method&#34;: &#34;getTime&#34;, &#34;params&#34;:{}} # 执行method rpc/{$id} post claim # 用户认领设备 post 服务架构 产品架构 设备接入: MQTT、CoAP、HTTP 规则引擎 # 处理设备消息 消息(message) 设备传入数据 设备生命周期事件 rest api事件 rpc请求 规则节点(node) # 过滤消息 filter enrichment transformation action external rule chain 规则链 # 连接节点 核心服务 设备认证: token、X.509 规则和插件 多租户(tenant) 客户 资产 设备 部件(widget)仪表盘(dashboard) alarm 实体视图 设备即服务(DaaS) 共享资产、设备 传感器等权限 告警和事件 网关: rest api, websocket actor模型: 用于并发 集群: zookeeper服务发现, 一致性哈希 安全: SSL 第三方 akka zookeeper grpc cassandra system general mail security 功能模块 admin tenant rule chain filter enrichment transformation action *analytics external rule chain *data converters *integrations *roles *customers hierarchy *user groups customers *customer groups assets *asset groups devices *device groups entity views *entity view groups widgets library dashboards *dashboard groups *scheduler report send rpc update attributes *white labeling main server mail templates custom translation custom menu white labeling login white labeling self registration audit logs entities 包含 tenants customers users devices assets alarms dashboards rule node rule chain 操作 detail assigned to customer attributes client server shared telemetry alarms events relations audit logs">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:modified_time" content="2022-11-14T20:22:20+08:00">
<title>Framework | ukeate的笔记</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="https://ukeate.com/docs/architect/strategy/iot/framework/">
<link rel="stylesheet" href="/book.min.6c8b9d2a1fc95075ed7da46ca81060b39add8fff6741ac51259f768929281e2c.css" integrity="sha256-bIudKh/JUHXtfaRsqBBgs5rdj/9nQaxRJZ92iSkoHiw=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.583fa0f4b9042b18aff2c52da52cf49a4f5a6745f9e09453d85a938cfec8ee01.js" integrity="sha256-WD&#43;g9LkEKxiv8sUtpSz0mk9aZ0X54JRT2FqTjP7I7gE=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  <script data-ad-client="ca-pub-6239994681364905" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<meta name="baidu_union_verify" content="aacbc30462cce84b2333063d99284e3b">
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/logo.png" alt="Logo" class="book-icon" /><span>ukeate的笔记</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>







  
<ul>
  
  <li>
    <a href="/posts/"  >
        Blog
      </a>
  </li>
  
</ul>










  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/" class="">基本功</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/speach/" class="">演说</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/body/" class="">身体</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/computer/" class="">Computer</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/computer/principle/" class="">支撑-原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/computer/performance/" class="">Performance</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/algorithm/" class="">算法</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/algorithm/thought/" class="">算法思想</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/algorithm/data_structure/" class="">数据结构</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/algorithm/math/" class="">数学</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/" class="">架构</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/code/" class="">代码</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/code/security/" class="">Security</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/code/design_mode/" class="">Java设计模式</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/project/" class="">工程设计</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/project/ddd/" class="">工程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/project/frontend/" class="">前端</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>战略性技术</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/ai/" class="">AI</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/ai/map/" class="">知识图谱</a>
  

        </li>
      
    
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/iot/" class="">IoT</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/iot/framework/" class="active">Framework</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/meta/" class="">IoT</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/meta/media/" class="">媒体</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/middle_platform/" class="">中台</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/block_chain/" class="">Block Chain</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Cloud</span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/datalake/" class="">Datalake</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/datalake/ecology/" class="">Ecology</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/edge/" class="">Edge</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/manage/" class="">Manage</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/manage/organize/" class="">组织</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/manage/organize/people/" class="">人员</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/" class="">Method</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/product_plan/" class="">产品规划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/code_plan/" class="">代码规划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/ops_plan/" class="">运维规划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/advice_plan/" class="">咨询规划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/architect/" class="">服务治理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/project_plan/" class="">项目规划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/test_plan/" class="">测试规划</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/summary/" class="">这些年我做过的技术</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/" class="">程序语言</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/principle/" class="">程序语言原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/haskell/" class="">Haskell</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/elixir/" class="">Elixir</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/go/" class="">Go</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/python/" class="">Python</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/clojure/" class="">Clojure</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/js/" class="">JS</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/" class="">Java</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/java_reactive/" class="">Java响应式编程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/javaweb/" class="">JavaWeb</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/juc/" class="">Java并发</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/jvm/" class="">JVM</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/collection/" class="">Collection</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/spring/" class="">Spring</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/markup_language/" class="">Markup Language</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/markup_language/html/" class="">Html</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/markup_language/css/" class="">Css</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/" class="">工具</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/ops/" class="">运维</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/ops/monitor/" class="">Monitor</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/ops/docker/" class="">Docker</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/ops/k8s/" class="">Kubernetes</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/product/enterprise_system/" class="">企业级系统</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/develop/" class="">Develop</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/develop/eclipse/" class="">Eclipse</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/develop/vim/" class="">VIM</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/develop/apple/" class="">Apple</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/develop/jetbrains/" class="">Jetbrains</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/linux/" class="">Linux</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/linux/linux_program/" class="">LinuxProgram</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/linux/scene/" class="">LinuxScene</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/linux/linux_tool/" class="">LinuxTool</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/product/framework/" class="">Framework</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/physics/" class="">实物工具</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/test/" class="">测试</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/test/debug/" class="">程序调试</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/db/" class="">数据库</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/db/mongodb/" class="">Mongodb</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/db/postgresql/" class="">Postgre SQL</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/db/elasticsearch/" class="">Elasticsearch</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/db/mysql/" class="">Mysql</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/db/oracle/" class="">Oracle</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/db/redis/" class="">Redis</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/" class="">中间件</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/distributed/" class="">支撑-分布式</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/distributed/spring_cloud/" class="">Spring Cloud</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library_frontend/" class="">前端</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library_frontend/bootstrap/" class="">Bootstrap</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library_frontend/threejs/" class="">Threejs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library_frontend/angular/" class="">Angular</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library_frontend/jquery/" class="">Jquery</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library_frontend/react/" class="">React</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library/" class="">小功能</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library/hibernate/" class="">Hibernate</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Container</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/container/nginx/" class="">Nginx</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/container/nodejs/" class="">Nodejs</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cache/" class="">Cache</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/cache/ops/" class="">Ops</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cache/work_code/" class="">Work Code</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cache/template/" class="">模板配置</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cache/soft_arch/" class="">软考架构师</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/misc/" class="">杂项</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>














</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>Framework</h3>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#thingsboard">ThingsBoard</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="thingsboard">
  ThingsBoard
  <a class="anchor" href="#thingsboard">#</a>
</h1>
<pre><code># java, 社区版、企业版
文档
    github.com/thingsboard/thingsboard
    thingsboard.io/docs
    localhost:8080/swagger-ui.html      # 本地swagger
安装
    docker
        docker run -it -p 9090:9090 -p 1883:1883 -p 5683:5683/udp -v ~/.mytb-data:/data -v ~/.mytb-logs:/var/log/thingsboard --name mytb thingsboard/tb-postgres
    maven
        确定ui/pom.xml中&lt;nodeVersion&gt;
        mvn install -DskipTests
    配置
        application
            zk
                ZOOKEEPER_ENABLED
                ZOOKEEPER_URL
            cassandra
                CASSANDRA_URL
                CASSANDRA_USERNAME
                CASSANDRA_PASSWORD
            redis
                REDIS_HOST
                REDIS_PORT
                REDIS_DB
                REDIS_PASSWORD
            postgresql
                SPRING_DATASOURCE_URL
                SPRING_DATASOURCE_USERNAME
                SPRING_DATASOURCE_PASSWORD
            kafka
                TB_KAFKA_SERVERS
    运行
        application
            server
        transport
            http
    demo数据
        admin
            sysadmin@thingsboard.org    sysadmin
        tenant
            tenant@thingsboard.org  tenant
        customer
            customer@thingsboard.org或customerA@thingsboard.org  customer
            customerB@thingsboard.org   customer
            customerC@thingsboard.org   customer
        device
            A1, A2, A3  A1_TEST_TOKEN,...   customerA
            B1  B1_TEST_TOKEN   customerB
            C1  C1_TEST_TOKEN   customerC
            'DHT11 Demo Device'     DHT11_DEMO_TOKEN
            'Raspberry Pi Demo Device'  RASPBERRY_PI_DEMO_TOKEN
包结构
    application                         # 可改, 网关
        server
            install
            config                      # 同源策略、swagger、websocket、消息、安全
            exception
            controller                  # 页面调用
            service
            actors
                service
                    DefaultActorService
                        actorContext
                            actorService(this)
                            actorSystem
                            appActor
                            statsActor
                        rpcManagerActor
    common                              # 不可改, 功能代理
        data                            # 数据结构
        message                         # 消息类型
        transport                       # 客户端调用
    dao                                 # 可改, 业务, 适配db
        model                           # 数据库对象
        resources
            sql                         # 表结构
    netty-mqtt                          # 不可改, 数据通信协议
    rule-engine                         # 不可改, 规则引擎
    transport                           # 不可改, 设备端运行
        http                            # 启动http传输协议
        coap
        mqtt
    tools                               # 可改, 工具
    ui                                  # 可改, 页面, angular, react, webpack
    docker                              # 不可改, 打包
    msa                                 # 不可改，分布式
        black-box-tests                 # 黑盒测试
        js-executor                     # 执行js
    log
    img         
模块
    application
        common
            data                        # 数据结构
            message                     # 消息结构
            transport                   # 接口结构，适配客户端
    dao                                 # 交互data, 兼容不同db
    tools
        extensions
            kafka
            mqtt
            rabbitmq
            rest-api-call
        extensions-api
            action
            filter
            plugin
            processor
        extensions-core                 # 实现公用extensions-api
    transport
        http                            # rest
        coap                            # californium
        mqtt                            # netty
    规则引擎                             # 基于actors执行
        filters
        processors
        action
    ui                                  # node.js + yarn
表结构
    tenant
    customer                            # 关联tenant
    tb_user                             # user信息、角色
    user_credentials                    # user密码
    admin_settings                      # admin信息, key value形式
    audit_log                           # 登录日志

    asset
    entity_view     
    attribute_kv                        # entity attribute
    component_descriptor                # node类

    device                              # 设备, label
    device_credentials                  # 设备ACCESS_TOKEN
    ts_kv                               # 设备事件
    ts_kv_latest                        # 设备当前状态

    rule_chain                          # rule root chain
    rule_node                           # rule节点
    relation                            # rule关系
    event                               # rule事件
    alarm                               # alarm事件

    dashboard                           # dashboard设置
    widget_type                         # widget, 别名
    widgets_bundle
api
    host:port/api/v1/$ACCESS_TOKEN/
        telementry                      # 上传遥测数据
            post {&quot;key1&quot;:&quot;value1&quot;}
            post [{&quot;key1&quot;:&quot;value1&quot;}]
            post {&quot;ts&quot;:1451649600512, &quot;values&quot;:{&quot;key1&quot;:&quot;value1&quot;}}
        attributes
            post {&quot;attribute1&quot;:&quot;value1&quot;}          # 更新属性
            get                         # 请求属性
        attributes/updates
            get ?timeout=20000          # 订阅属性
        rpc
            get ?timeout=20000          # 要求订阅，返回id, method, params
            post {&quot;method&quot;: &quot;getTime&quot;, &quot;params&quot;:{}}     # 执行method
        rpc/{$id}
            post
        claim                           # 用户认领设备
            post
服务架构
产品架构
    设备接入: MQTT、CoAP、HTTP
    规则引擎                             # 处理设备消息
        消息(message)
            设备传入数据
            设备生命周期事件
            rest api事件
            rpc请求
        规则节点(node)                   # 过滤消息
            filter
            enrichment
            transformation
            action
            external
            rule chain
        规则链                           # 连接节点
    核心服务
        设备认证: token、X.509
        规则和插件
        多租户(tenant)
            客户
                资产
                设备
        部件(widget)仪表盘(dashboard)
            alarm
            实体视图
                设备即服务(DaaS)
                共享资产、设备
                传感器等权限
        告警和事件
    网关: rest api, websocket
    actor模型: 用于并发
    集群: zookeeper服务发现, 一致性哈希
    安全: SSL
    第三方
        akka
        zookeeper
        grpc
        cassandra

    system
        general
        mail
        security
功能模块
    admin
    tenant
        rule chain
            filter
            enrichment
            transformation
            action
            *analytics
            external
            rule chain
        *data converters
        *integrations
        *roles
        *customers hierarchy
        *user groups
        customers
        *customer groups
        assets
        *asset groups
        devices
        *device groups
        entity views
        *entity view groups
        widgets library
        dashboards
        *dashboard groups
        *scheduler
            report
            send rpc
            update attributes
        *white labeling
            main server
            mail templates
            custom translation
            custom menu
            white labeling
            login white labeling
            self registration
        audit logs
    entities
        包含
            tenants
            customers
            users
            devices
            assets
            alarms
            dashboards
            rule node
            rule chain
        操作
            detail
            assigned to customer
            attributes
                client
                server
                shared
            telemetry
            alarms
            events
            relations
            audit logs
</code></pre>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/ukeate/hugo-blog/commit/2f21611cabda6ad61a59703a1951538430601829" title='Last modified by outrun | Nov 14, 2022' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="" />
      <span>Nov 14, 2022</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/ukeate/hugo-blog/blob/master//content/docs/architect/strategy/iot/framework.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#thingsboard">ThingsBoard</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












