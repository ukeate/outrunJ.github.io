<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  基础
  #

方法
    TDD                     # Test-Driven Development
阶段
    单元测试阶段
        单元测试
    集成测试阶段            # 出厂测试
        冒烟测试            # 测主流程
        功能测试
            黑盒
            灰盒            # 集成测试阶段，黑盒但关注程序内部
            白盒
        回归测试
    系统测试阶段            # 第三方测试
    验收测试阶段
    性能测试                # PTS(Performance Testing Service)
        压力测试            # 系统失效的负载点
            常规模式        # 稳定并发
            梯度模式        # 并发梯度递增
            目标模式        # 并发梯度递增，达到预设指标(CPU、用户数、TPS、RT等)
        负载测试            # 满足性能指标情况下，最大负载
        疲劳强度测试        # 长时间执行最大工作量，保证持续业务量指标
        基准测试            # 统计多少时间内执行了多少次某个方法
        大数据量测试
            独立测试        # 针对存储、传输、统计、查询测试
            综合测试        # 大数据量下压测，负载，疲劳结合
        全链路压测
灰度发布                    # 金丝雀发布
    A/B测试
    蓝绿测试    
前端测试
    structure/behavior(数据结构/行为)问题
        # 判断是否有此耦合，用一个测试验证: 是否为应用逻辑编写一个单元测试而不需要dom结构存在
        ## angular中没有这种问题，因为所有定位元素和处理事件的工作都是在angular内部完成的
        ## 在测试时创建dom，就增加了测试的复杂性。而且页面变化时有更多维护要做。访问dom的操作很慢，测试反馈时间长


  数据库
  #

sysbench
    # mysql 压测
    --db-driver=mysql --mysql-host=visitor-bench.ctysoosgzk4k.rds.cn-north-1.amazonaws.com.cn --mysql-user=root --mysql-password=12345678 --threads=512 --events=1000000 --time=0 --report-interval=15 ./bench_visit_page_insert.lua run


  接口
  #


  jmeter
  #

压测场景
    HEAP=&quot;-Xms1g -Xmx1g -XX:MaxMetaspaceSize=256m&quot;
    jmeter -n -t [jmx file] -l [results file] -e -o [Path to web report folder]


  loadrunner
  #

    脚本参数
        get
            web_url(&quot;login&quot;,
                &quot;URL=http://192.168.0.14:9081/ryx-login/sso/login&quot;,
                &quot;Resource=0&quot;,
                &quot;RecContentType=text/html&quot;,
                &quot;Referer=&quot;,
                &quot;Snapshot=t1.inf&quot;,
                &quot;Mode=HTML&quot;,
                EXTRARES,
                &quot;Url=../ycls/img/banner1.jpg&quot;, ENDITEM,
                &quot;Url=../ycls/img/banner2.jpg&quot;, ENDITEM,
                &quot;Url=../ycls/img/banner3.jpg&quot;, ENDITEM,
                &quot;Url=../ycls/img/userinput.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/sawtooth.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/tip2.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/pwdinput.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/login_back.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/tip1.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/codeinput.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/loading-small2.gif&quot;, ENDITEM,
                &quot;Url=/favicon.ico&quot;, &quot;Referer=&quot;, ENDITEM,
                LAST);

        post参数
            web_submit_data(&quot;getActivityParameter&quot;,
                &quot;Action=http://192.168.0.14:9081/tobacco/retail/lottery/getActivityParameter?jsonp=jQuery19109862107675272699_1401335732777&quot;,
                &quot;Method=POST&quot;,
                &quot;RecContentType=text/html&quot;,
                &quot;Referer=http://192.168.0.14:9081/tobacco/retail/index;jsessionid=7BBAFC6DE481FBCB1CB88D738BD7EE71&quot;,
                &quot;Snapshot=t6.inf&quot;,
                &quot;Mode=HTML&quot;,
                ITEMDATA,
                &quot;Name=requestType&quot;, &quot;Value=ajax&quot;, ENDITEM,
                LAST);

        post直接传数据
            web_custom_request(&quot;dataservice&quot;,
                &quot;URL=http://202.110.222.207:7080/rtserver/rest/resource/tobacco/dataservice&quot;,
                &quot;Method=POST&quot;,
                &quot;Resource=0&quot;,
                &quot;RecContentType=text/plain&quot;,
                &quot;Referer=&quot;,
                &quot;Snapshot=t1.inf&quot;,
                &quot;Mode=HTML&quot;,
                &quot;Body= {\&quot;trans_code\&quot;:\&quot;1006\&quot;,\&quot;end_date\&quot;:\&quot;20140701\&quot;,\&quot;source\&quot;:\&quot;appkey\&quot;,\&quot;data\&quot;:\&quot;eyJiZWdpbl9kYXRlIjoiMjAxNDA2MDEiLCJlbmRfZGF0ZSI6IjIwMTQwNzAxIiwicG9zX2lkIjoiODg1MDAzMTAiLCJzb3VyY2UiOiJhcHBrZXkiLCJjdXN0b21lcl9pZCI6IjM3MDExMjEwNzQ2NyIsImFjY2Vzc190b2tlbiI6IiJ9\&quot;,\&quot;begin_date\&quot;:\&quot;20140601\&quot;,\&quot;mac\&quot;:\&quot;123\&quot;,\&quot;pos_id\&quot;:\&quot;88500310\&quot;,\&quot;customer_id\&quot;:\&quot;370112107467\&quot;,\&quot;access_token\&quot;:\&quot;\&quot;}&quot;,
                LAST);


  phoenix
  #

    介绍
            web自动化测试工具
    特点
            分布式执行
            无脚本模式执行
            无人值守模式执行
            自定模式执行
    模块
            数据维护模块
    部署模式
            server-client
                    仅windows下可用
                    socket通信
            web部署
                    server与client放到tomcat或webLogic下部署
                    http通信
                    web页面控制与监控client端执行

wireshark
siege
        siege -c 200 -r 100 http://www.google.com
                # 200并发，发送100次请求
tcpcopy
        # 基于tcp packets的请求复制工具, 在线流量导入到测试系统中
ab
        内网测试, apache自带的压力测试工具, 安装apache后在bin目录中找到
        ab -n1000 -c100 http://www.google.com/a.html
                # 100并发, 发送1000次请求
locust
        # 外网性能测试　
http_load
        # 压测
        http_load -rate 5 -seconds 10 http://www.baidu.com
                # -p 并发
                # -f 总计访问数
                # -r 每秒访问频率
                # -s 总计访问时间
yslow
        # firefox插件，网页性能测试工具
gatling
        # dsl脚本, 生成报表
wrk
        # 压测
        wrk -R5000 -d10s &quot;http://internal-rope-api-1875734411.cn-north-1.elb.amazonaws.com.cn/online_agents/1&quot;
swagger
        # 文档与测试用例
fortio
        # istio压测工具
hey
        # http压测


  js
  #

heapdump
        # 堆内存快照
jslint
supertest
        # 测http接口
sinon.js
        # 非运行测试，延时测试等
vows
        # asynchronous BDD(behaviour drven development) for Node
chai
        # js断言
mock.js
        # 模拟生成接口假数据


  benchmark
  #

介绍
        测试代码执行性能
使用
        var Benchmark = require(&#39;benchmark&#39;);
        var suite = new Benchmark.Suite;

        var int1 = function(str){
                return &#43;str;
        };
        var int2 = function(str){
                return parseInt(str, 10);
        };
        var int3 = function(str){
                return Number(str);
        };
        // 开始测试
        var number = &#39;100&#39;;
        suite
        .add(&#39;&#43;&#39;, function(){
                int1(number);
        });
        .add(&#39;parseInt&#39;, function(){
                int2(number);
        });
        .add(&#39;Number&#39;, function(){
                int3(number);
        });
        .on(&#39;cycle&#39;, function(event){        // 每个测试跑完后输出信息
                console.log(String(event.target));
        })
        .on(&#39;complete&#39;, function(){
                console.log(&#39;Fastest is&#39; &#43; this.filter(&#39;fastest&#39;).pluck(&#39;name&#39;));
        })
        .run({&#39;async&#39;: true});                    // 这里async与时间计算有关，默认为true


  travis
  #

介绍
    项目node版本测试，在基本依赖下跑
使用
    在travis上授权仓库，每当push代码到github, 会自动跑测试
    配置根目录下的.travis.yml文件来配置测试内容，如
        language: node_js
        node_js:
        -&#39;0.8&#39;
        -&#39;0.10&#39;
        -&#39;0.11&#39;
        script: make test
        services:
            mongodb
            # 一个使用了mongodb的nodejs应用，用0.8、0.10、0.11三个版本来跑，跑测试的命令是make test
    travis测试的项目，可以得到一个图片地址，显示项目当前的测试通过状态，把这个图片添加到项目的README中


  jasmine
  #

介绍
    编写单元测试
使用
    describe(&quot;A suite&quot;, function(){
        var foo;
        beforeEach(function(){
                foo = 0;
                foo &#43;= 1;
        });
        afterEach(function(){
                foo = 0;
        });
        it(&quot;contains spec with an expectation&quot;, function(){
                expect(true).toBe(true);
        });
    });


  should
  #

介绍
    兼容性测试
安装
    npm install should --save-dev
使用
var should = require(&#39;should&#39;);

user.should.have.property(&#39;name&#39;, &#39;jack&#39;)
    # should(user).have.property(&#39;name&#39;,&#39;jack&#39;);
user.should.have.property(&#39;pets&#39;).with.lengthOf(4);
    # 判断数组
should.not.exist(err);
should.exist(result);
result.bar.should.equal(foo);
(5).should.be.exactly(5).and.be.a.Number();
user.should.be.an.instanceOf(Object).and.have.property(&#39;name&#39;, &#39;jack&#39;);
this.obj.should.have.property(&#39;id&#39;).which.is.a.Number();


  memwatch
  #

介绍
    监控内存leak, stats,leak在连续5次垃圾回收后内存没释放时触发, stats事件在垃圾回收时触发

o-&gt; 堆内存比较
var memwatch = require(&#39;memwatch&#39;)
var leakArray = []
var leak = function () {
    leakArray.push(&#39;leak&#39; &#43; Math.random())
}
var hd = new memwatch.HeapDiff()
for (var i = 0; i &lt; 10000; i&#43;&#43;) {
    leak()
}

var diff = hd.end()
console.log(JSON.stringify(diff, null, 2))


  muk
  #

var muk = require(&#39;muk&#39;)
before(function () {
    muk(fs, &#39;readFileSync&#39;, function (path, encoding) {
        throw new Error(&#39;mock readFileSync error&#39;)
    })
    muk(fs, &#39;readFile&#39;, function (path, encoding, callback) {
        process.nextTick(function () {
            # 模拟异步
            callback(new Error(&#39;mock readFile error&#39;))
        })
    })
})

after(function () {
    muk.restore()
})


  rewire
  #

介绍
    测试私有方法

o-&gt;
it(&#39;limit should return success&#39;, function () {
    var lib = rewire(&#39;../lib/index.js&#39;)
    var litmit = lib.__get__(&#39;limit&#39;)
    litmit(10).should.be.equal(10)
})


  mocha
  #

介绍
    单元测试框架
命令
    mocha
        # --reporters 查看所有报告样式, 默认dot, 常用spec, json, html-cov
        # -R &lt;reporter&gt;采用某报告样式
        # -t &lt;ms&gt;设置超时时间
使用
    npm install -g mocha
    // package.json
    {
        &quot;scripts&quot;: {
            &quot;test&quot;: &quot;mocha test&quot;
            &quot;blanket&quot;: {
                &quot;pattern&quot;: &quot;//^((?!(node_modules|test)).)*$/&quot;,
                &quot;data-cover-flags&quot;: {
                    &quot;debug&quot;: false
                }
            }
        }
    }
    mocha test

o-&gt; bdd风格
describe(&#39;Array&#39;, function() {
    before(function() {})
        # 钩子函数还有after, beforeEach, afterEach
    it(&#39;should return -1 when not present&#39;, function (done) {
        [1,2,3].indexOf(4).should.equal(-1)
        this.timeout(500)
            # 500ms后超时
        done()
            # 用done来测试异步
    })
})

o-&gt; bdd风格
suite(&#39;Array&#39;, function() {
    setup(function () {})
        # 钩子函数还有teardown
    suite(&#39;$indexOf()&#39;, function () {
        test(&#39;should return -1 when not present&#39;, function() {
            assert.equal(-1, [1,2,3].indexOf(4))
        })
    })
})


  istanbul
  #

介绍
    名字是依斯坦布尔，用来白盒覆盖用例测试
    支持的use cases有unit tests, browser tests, server side code embedding
使用
    instanbul cover test.js


  phantomjs
  #

介绍
    前端测试工具
    webkit js测试工具，支持多web标准, dom, css, json, canvas和svg
o-&gt; 使用1
    npm install mocha-phantomjs
    mocha-phantomjs index.html

o-&gt; 使用2
    phantomjs hello.js

    // hello.js
    console.log(&#39;Hello, world&#39;);
    phantom.exit();


  browserstack
  #

介绍
    前端测试工具
    内建webdriver的api
使用
    npm install browserstack-runner --save-dev
    ./node_modules/.bin/browserstack-runner init
    // browserstack.json
        &quot;test_framework&quot;: &quot;mocha&quot;,
        &quot;timeout&quot;: 60,
        &quot;test_path&quot;: &quot;public/index.html&quot;
    https://www.browserstack.com/accounts/automate
        得到username 和 access key
        复制到browserstack.json中的username和key
    browserstack-runner
    https://www.browserstack.com/automate 查看结果


  karma
  #

介绍
    是google Testacular的新名字，自动化完成单元测试
使用
    npm install -g karma
    karma start
    karma init
        # 初始化karma配置文件
    npm install karma-jasmine


  jscover
  #

介绍
    覆盖率测试
使用
    npm install jscover -g
    jscover lib lib-cov
        # 把lib下的源码编译到lib-cov下，新代码在每一行加上了执行次数统计
    index.js中
        module.exports = process.env.LIB_COV ? require(&#39;./lib-cov/index&#39;) : require(&#39;./lib/index&#39;)
    export LIB_COV=1
    mocha -R html-cov &gt; coverage.html
        # 生成结果


  blanket
  #

介绍
    比jscover更好的测试工具
使用
    package.json中
        &quot;scripts&quot;: {
            &quot;blanket&quot;: {
                &quot;pattern&quot;: &quot;eventproxy/lib&quot;
                    # 要测试的源码目录
            }
        }
    mocha --require blanket -R html-cov &gt; coverage.html


  python
  #

nose
    # 注解测试
selenium
    # 自动化测试


  go
  #

gomock
    # 官方mock库, 对接口mock


  monkey
  #

介绍
    对函数mock
Patch()
Unpatch()
PatchInstanceMethod()
UnpatchInstanceMethod()

问题
    内联函数不能mock
        测试时禁止内联, go test -gcflags=all=&quot;-N -l&quot;


  java
  #


  hamcrest
  #

# 自然语法


  mockito
  #


  页面
  #

jsperf
    # js性能分析
jasmine
    # js单元测试


  移动
  #

robotium
    # android自动化测试
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://ukeate.com/docs/tool/test/">
  <meta property="og:site_name" content="ukeate的笔记">
  <meta property="og:title" content="测试">
  <meta property="og:description" content="基础 # 方法 TDD # Test-Driven Development 阶段 单元测试阶段 单元测试 集成测试阶段 # 出厂测试 冒烟测试 # 测主流程 功能测试 黑盒 灰盒 # 集成测试阶段，黑盒但关注程序内部 白盒 回归测试 系统测试阶段 # 第三方测试 验收测试阶段 性能测试 # PTS(Performance Testing Service) 压力测试 # 系统失效的负载点 常规模式 # 稳定并发 梯度模式 # 并发梯度递增 目标模式 # 并发梯度递增，达到预设指标(CPU、用户数、TPS、RT等) 负载测试 # 满足性能指标情况下，最大负载 疲劳强度测试 # 长时间执行最大工作量，保证持续业务量指标 基准测试 # 统计多少时间内执行了多少次某个方法 大数据量测试 独立测试 # 针对存储、传输、统计、查询测试 综合测试 # 大数据量下压测，负载，疲劳结合 全链路压测 灰度发布 # 金丝雀发布 A/B测试 蓝绿测试 前端测试 structure/behavior(数据结构/行为)问题 # 判断是否有此耦合，用一个测试验证: 是否为应用逻辑编写一个单元测试而不需要dom结构存在 ## angular中没有这种问题，因为所有定位元素和处理事件的工作都是在angular内部完成的 ## 在测试时创建dom，就增加了测试的复杂性。而且页面变化时有更多维护要做。访问dom的操作很慢，测试反馈时间长 数据库 # sysbench # mysql 压测 --db-driver=mysql --mysql-host=visitor-bench.ctysoosgzk4k.rds.cn-north-1.amazonaws.com.cn --mysql-user=root --mysql-password=12345678 --threads=512 --events=1000000 --time=0 --report-interval=15 ./bench_visit_page_insert.lua run 接口 # jmeter # 压测场景 HEAP=&#34;-Xms1g -Xmx1g -XX:MaxMetaspaceSize=256m&#34; jmeter -n -t [jmx file] -l [results file] -e -o [Path to web report folder] loadrunner # 脚本参数 get web_url(&#34;login&#34;, &#34;URL=http://192.168.0.14:9081/ryx-login/sso/login&#34;, &#34;Resource=0&#34;, &#34;RecContentType=text/html&#34;, &#34;Referer=&#34;, &#34;Snapshot=t1.inf&#34;, &#34;Mode=HTML&#34;, EXTRARES, &#34;Url=../ycls/img/banner1.jpg&#34;, ENDITEM, &#34;Url=../ycls/img/banner2.jpg&#34;, ENDITEM, &#34;Url=../ycls/img/banner3.jpg&#34;, ENDITEM, &#34;Url=../ycls/img/userinput.png&#34;, ENDITEM, &#34;Url=../ycls/img/sawtooth.png&#34;, ENDITEM, &#34;Url=../ycls/img/tip2.png&#34;, ENDITEM, &#34;Url=../ycls/img/pwdinput.png&#34;, ENDITEM, &#34;Url=../ycls/img/login_back.png&#34;, ENDITEM, &#34;Url=../ycls/img/tip1.png&#34;, ENDITEM, &#34;Url=../ycls/img/codeinput.png&#34;, ENDITEM, &#34;Url=../ycls/img/loading-small2.gif&#34;, ENDITEM, &#34;Url=/favicon.ico&#34;, &#34;Referer=&#34;, ENDITEM, LAST); post参数 web_submit_data(&#34;getActivityParameter&#34;, &#34;Action=http://192.168.0.14:9081/tobacco/retail/lottery/getActivityParameter?jsonp=jQuery19109862107675272699_1401335732777&#34;, &#34;Method=POST&#34;, &#34;RecContentType=text/html&#34;, &#34;Referer=http://192.168.0.14:9081/tobacco/retail/index;jsessionid=7BBAFC6DE481FBCB1CB88D738BD7EE71&#34;, &#34;Snapshot=t6.inf&#34;, &#34;Mode=HTML&#34;, ITEMDATA, &#34;Name=requestType&#34;, &#34;Value=ajax&#34;, ENDITEM, LAST); post直接传数据 web_custom_request(&#34;dataservice&#34;, &#34;URL=http://202.110.222.207:7080/rtserver/rest/resource/tobacco/dataservice&#34;, &#34;Method=POST&#34;, &#34;Resource=0&#34;, &#34;RecContentType=text/plain&#34;, &#34;Referer=&#34;, &#34;Snapshot=t1.inf&#34;, &#34;Mode=HTML&#34;, &#34;Body= {\&#34;trans_code\&#34;:\&#34;1006\&#34;,\&#34;end_date\&#34;:\&#34;20140701\&#34;,\&#34;source\&#34;:\&#34;appkey\&#34;,\&#34;data\&#34;:\&#34;eyJiZWdpbl9kYXRlIjoiMjAxNDA2MDEiLCJlbmRfZGF0ZSI6IjIwMTQwNzAxIiwicG9zX2lkIjoiODg1MDAzMTAiLCJzb3VyY2UiOiJhcHBrZXkiLCJjdXN0b21lcl9pZCI6IjM3MDExMjEwNzQ2NyIsImFjY2Vzc190b2tlbiI6IiJ9\&#34;,\&#34;begin_date\&#34;:\&#34;20140601\&#34;,\&#34;mac\&#34;:\&#34;123\&#34;,\&#34;pos_id\&#34;:\&#34;88500310\&#34;,\&#34;customer_id\&#34;:\&#34;370112107467\&#34;,\&#34;access_token\&#34;:\&#34;\&#34;}&#34;, LAST); phoenix # 介绍 web自动化测试工具 特点 分布式执行 无脚本模式执行 无人值守模式执行 自定模式执行 模块 数据维护模块 部署模式 server-client 仅windows下可用 socket通信 web部署 server与client放到tomcat或webLogic下部署 http通信 web页面控制与监控client端执行 wireshark siege siege -c 200 -r 100 http://www.google.com # 200并发，发送100次请求 tcpcopy # 基于tcp packets的请求复制工具, 在线流量导入到测试系统中 ab 内网测试, apache自带的压力测试工具, 安装apache后在bin目录中找到 ab -n1000 -c100 http://www.google.com/a.html # 100并发, 发送1000次请求 locust # 外网性能测试　http_load # 压测 http_load -rate 5 -seconds 10 http://www.baidu.com # -p 并发 # -f 总计访问数 # -r 每秒访问频率 # -s 总计访问时间 yslow # firefox插件，网页性能测试工具 gatling # dsl脚本, 生成报表 wrk # 压测 wrk -R5000 -d10s &#34;http://internal-rope-api-1875734411.cn-north-1.elb.amazonaws.com.cn/online_agents/1&#34; swagger # 文档与测试用例 fortio # istio压测工具 hey # http压测 js # heapdump # 堆内存快照 jslint supertest # 测http接口 sinon.js # 非运行测试，延时测试等 vows # asynchronous BDD(behaviour drven development) for Node chai # js断言 mock.js # 模拟生成接口假数据 benchmark # 介绍 测试代码执行性能 使用 var Benchmark = require(&#39;benchmark&#39;); var suite = new Benchmark.Suite; var int1 = function(str){ return &#43;str; }; var int2 = function(str){ return parseInt(str, 10); }; var int3 = function(str){ return Number(str); }; // 开始测试 var number = &#39;100&#39;; suite .add(&#39;&#43;&#39;, function(){ int1(number); }); .add(&#39;parseInt&#39;, function(){ int2(number); }); .add(&#39;Number&#39;, function(){ int3(number); }); .on(&#39;cycle&#39;, function(event){ // 每个测试跑完后输出信息 console.log(String(event.target)); }) .on(&#39;complete&#39;, function(){ console.log(&#39;Fastest is&#39; &#43; this.filter(&#39;fastest&#39;).pluck(&#39;name&#39;)); }) .run({&#39;async&#39;: true}); // 这里async与时间计算有关，默认为true travis # 介绍 项目node版本测试，在基本依赖下跑 使用 在travis上授权仓库，每当push代码到github, 会自动跑测试 配置根目录下的.travis.yml文件来配置测试内容，如 language: node_js node_js: -&#39;0.8&#39; -&#39;0.10&#39; -&#39;0.11&#39; script: make test services: mongodb # 一个使用了mongodb的nodejs应用，用0.8、0.10、0.11三个版本来跑，跑测试的命令是make test travis测试的项目，可以得到一个图片地址，显示项目当前的测试通过状态，把这个图片添加到项目的README中 jasmine # 介绍 编写单元测试 使用 describe(&#34;A suite&#34;, function(){ var foo; beforeEach(function(){ foo = 0; foo &#43;= 1; }); afterEach(function(){ foo = 0; }); it(&#34;contains spec with an expectation&#34;, function(){ expect(true).toBe(true); }); }); should # 介绍 兼容性测试 安装 npm install should --save-dev 使用 var should = require(&#39;should&#39;); user.should.have.property(&#39;name&#39;, &#39;jack&#39;) # should(user).have.property(&#39;name&#39;,&#39;jack&#39;); user.should.have.property(&#39;pets&#39;).with.lengthOf(4); # 判断数组 should.not.exist(err); should.exist(result); result.bar.should.equal(foo); (5).should.be.exactly(5).and.be.a.Number(); user.should.be.an.instanceOf(Object).and.have.property(&#39;name&#39;, &#39;jack&#39;); this.obj.should.have.property(&#39;id&#39;).which.is.a.Number(); memwatch # 介绍 监控内存leak, stats,leak在连续5次垃圾回收后内存没释放时触发, stats事件在垃圾回收时触发 o-&gt; 堆内存比较 var memwatch = require(&#39;memwatch&#39;) var leakArray = [] var leak = function () { leakArray.push(&#39;leak&#39; &#43; Math.random()) } var hd = new memwatch.HeapDiff() for (var i = 0; i &lt; 10000; i&#43;&#43;) { leak() } var diff = hd.end() console.log(JSON.stringify(diff, null, 2)) muk # var muk = require(&#39;muk&#39;) before(function () { muk(fs, &#39;readFileSync&#39;, function (path, encoding) { throw new Error(&#39;mock readFileSync error&#39;) }) muk(fs, &#39;readFile&#39;, function (path, encoding, callback) { process.nextTick(function () { # 模拟异步 callback(new Error(&#39;mock readFile error&#39;)) }) }) }) after(function () { muk.restore() }) rewire # 介绍 测试私有方法 o-&gt; it(&#39;limit should return success&#39;, function () { var lib = rewire(&#39;../lib/index.js&#39;) var litmit = lib.__get__(&#39;limit&#39;) litmit(10).should.be.equal(10) }) mocha # 介绍 单元测试框架 命令 mocha # --reporters 查看所有报告样式, 默认dot, 常用spec, json, html-cov # -R &lt;reporter&gt;采用某报告样式 # -t &lt;ms&gt;设置超时时间 使用 npm install -g mocha // package.json { &#34;scripts&#34;: { &#34;test&#34;: &#34;mocha test&#34; &#34;blanket&#34;: { &#34;pattern&#34;: &#34;//^((?!(node_modules|test)).)*$/&#34;, &#34;data-cover-flags&#34;: { &#34;debug&#34;: false } } } } mocha test o-&gt; bdd风格 describe(&#39;Array&#39;, function() { before(function() {}) # 钩子函数还有after, beforeEach, afterEach it(&#39;should return -1 when not present&#39;, function (done) { [1,2,3].indexOf(4).should.equal(-1) this.timeout(500) # 500ms后超时 done() # 用done来测试异步 }) }) o-&gt; bdd风格 suite(&#39;Array&#39;, function() { setup(function () {}) # 钩子函数还有teardown suite(&#39;$indexOf()&#39;, function () { test(&#39;should return -1 when not present&#39;, function() { assert.equal(-1, [1,2,3].indexOf(4)) }) }) }) istanbul # 介绍 名字是依斯坦布尔，用来白盒覆盖用例测试 支持的use cases有unit tests, browser tests, server side code embedding 使用 instanbul cover test.js phantomjs # 介绍 前端测试工具 webkit js测试工具，支持多web标准, dom, css, json, canvas和svg o-&gt; 使用1 npm install mocha-phantomjs mocha-phantomjs index.html o-&gt; 使用2 phantomjs hello.js // hello.js console.log(&#39;Hello, world&#39;); phantom.exit(); browserstack # 介绍 前端测试工具 内建webdriver的api 使用 npm install browserstack-runner --save-dev ./node_modules/.bin/browserstack-runner init // browserstack.json &#34;test_framework&#34;: &#34;mocha&#34;, &#34;timeout&#34;: 60, &#34;test_path&#34;: &#34;public/index.html&#34; https://www.browserstack.com/accounts/automate 得到username 和 access key 复制到browserstack.json中的username和key browserstack-runner https://www.browserstack.com/automate 查看结果 karma # 介绍 是google Testacular的新名字，自动化完成单元测试 使用 npm install -g karma karma start karma init # 初始化karma配置文件 npm install karma-jasmine jscover # 介绍 覆盖率测试 使用 npm install jscover -g jscover lib lib-cov # 把lib下的源码编译到lib-cov下，新代码在每一行加上了执行次数统计 index.js中 module.exports = process.env.LIB_COV ? require(&#39;./lib-cov/index&#39;) : require(&#39;./lib/index&#39;) export LIB_COV=1 mocha -R html-cov &gt; coverage.html # 生成结果 blanket # 介绍 比jscover更好的测试工具 使用 package.json中 &#34;scripts&#34;: { &#34;blanket&#34;: { &#34;pattern&#34;: &#34;eventproxy/lib&#34; # 要测试的源码目录 } } mocha --require blanket -R html-cov &gt; coverage.html python # nose # 注解测试 selenium # 自动化测试 go # gomock # 官方mock库, 对接口mock monkey # 介绍 对函数mock Patch() Unpatch() PatchInstanceMethod() UnpatchInstanceMethod() 问题 内联函数不能mock 测试时禁止内联, go test -gcflags=all=&#34;-N -l&#34; java # hamcrest # # 自然语法 mockito # 页面 # jsperf # js性能分析 jasmine # js单元测试 移动 # robotium # android自动化测试">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
<title>测试 | ukeate的笔记</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="https://ukeate.com/docs/tool/test/">
<link rel="stylesheet" href="/book.min.6c8b9d2a1fc95075ed7da46ca81060b39add8fff6741ac51259f768929281e2c.css" integrity="sha256-bIudKh/JUHXtfaRsqBBgs5rdj/9nQaxRJZ92iSkoHiw=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.0f6a4302fe56c30046fd4c5181451fa23f629020e991f9cf123032b5e26b06f9.js" integrity="sha256-D2pDAv5WwwBG/UxRgUUfoj9ikCDpkfnPEjAyteJrBvk=" crossorigin="anonymous"></script>
<link rel="alternate" type="application/rss+xml" href="https://ukeate.com/docs/tool/test/index.xml" title="ukeate的笔记" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  <script data-ad-client="ca-pub-6239994681364905" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<meta name="baidu_union_verify" content="aacbc30462cce84b2333063d99284e3b">
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/logo.png" alt="Logo" class="book-icon" /><span>ukeate的笔记</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>















  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/" class="">基本功</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/speach/" class="">演说</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/body/" class="">身体</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/computer/" class="">Computer</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/computer/principle/" class="">支撑-原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/computer/performance/" class="">Performance</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/algorithm/" class="">算法</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/algorithm/thought/" class="">算法思想</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/algorithm/data_structure/" class="">数据结构</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/basic/algorithm/math/" class="">数学</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/" class="">架构</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/code/" class="">代码</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/code/security/" class="">Security</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/code/design_mode/" class="">Java设计模式</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/project/" class="">工程设计</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/project/ddd/" class="">工程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/project/frontend/" class="">前端</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>战略性技术</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/ai/" class="">AI</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/ai/map/" class="">知识图谱</a>
  

        </li>
      
    
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/iot/" class="">IoT</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/iot/framework/" class="">Framework</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/meta/" class="">IoT</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/meta/media/" class="">媒体</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/middle_platform/" class="">中台</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/block_chain/" class="">Block Chain</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Cloud</span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/datalake/" class="">Datalake</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/datalake/ecology/" class="">Ecology</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/strategy/edge/" class="">Edge</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/manage/" class="">Manage</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/manage/organize/" class="">组织</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/manage/organize/people/" class="">人员</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/" class="">Method</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/product_plan/" class="">产品规划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/code_plan/" class="">代码规划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/ops_plan/" class="">运维规划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/advice_plan/" class="">咨询规划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/architect/" class="">服务治理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/project_plan/" class="">项目规划</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/method/test_plan/" class="">测试规划</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/architect/summary/" class="">这些年我做过的技术</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/" class="">程序语言</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/principle/" class="">程序语言原理</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/haskell/" class="">Haskell</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/elixir/" class="">Elixir</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/go/" class="">Go</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/python/" class="">Python</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/clojure/" class="">Clojure</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/js/" class="">JS</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/" class="">Java</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/java_reactive/" class="">Java响应式编程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/javaweb/" class="">JavaWeb</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/juc/" class="">Java并发</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/jvm/" class="">JVM</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/collection/" class="">Collection</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/java/spring/" class="">Spring</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/markup_language/" class="">Markup Language</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/markup_language/html/" class="">Html</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/pl/markup_language/css/" class="">Css</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/" class="">工具</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/ops/" class="">运维</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/ops/monitor/" class="">Monitor</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/ops/docker/" class="">Docker</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/ops/k8s/" class="">Kubernetes</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/product/enterprise_system/" class="">企业级系统</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/develop/" class="">Develop</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/develop/eclipse/" class="">Eclipse</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/develop/vim/" class="">VIM</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/develop/apple/" class="">Apple</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/develop/jetbrains/" class="">Jetbrains</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/linux/" class="">Linux</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/linux/linux_program/" class="">LinuxProgram</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/linux/scene/" class="">LinuxScene</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/linux/linux_tool/" class="">LinuxTool</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/product/framework/" class="">Framework</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/physics/" class="">实物工具</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/test/" class="active">测试</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tool/test/debug/" class="">程序调试</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/db/" class="">数据库</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/db/mongodb/" class="">Mongodb</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/db/postgresql/" class="">Postgre SQL</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/db/elasticsearch/" class="">Elasticsearch</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/db/mysql/" class="">Mysql</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/db/oracle/" class="">Oracle</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/db/redis/" class="">Redis</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/" class="">中间件</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/distributed/" class="">支撑-分布式</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/distributed/spring_cloud/" class="">Spring Cloud</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library_frontend/" class="">前端</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library_frontend/bootstrap/" class="">Bootstrap</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library_frontend/threejs/" class="">Threejs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library_frontend/angular/" class="">Angular</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library_frontend/jquery/" class="">Jquery</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library_frontend/react/" class="">React</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library/" class="">小功能</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/library/hibernate/" class="">Hibernate</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Container</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/container/nginx/" class="">Nginx</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/middleware/container/nodejs/" class="">Nodejs</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cache/" class="">Cache</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/cache/ops/" class="">Ops</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cache/work_code/" class="">Work Code</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cache/template/" class="">模板配置</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/cache/soft_arch/" class="">软考架构师</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/misc/" class="">杂项</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>














</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>测试</h3>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#基础">基础</a></li>
    <li><a href="#数据库">数据库</a></li>
    <li><a href="#接口">接口</a>
      <ul>
        <li><a href="#jmeter">jmeter</a></li>
        <li><a href="#loadrunner">loadrunner</a></li>
        <li><a href="#phoenix">phoenix</a></li>
        <li><a href="#js">js</a>
          <ul>
            <li><a href="#benchmark">benchmark</a></li>
            <li><a href="#travis">travis</a></li>
            <li><a href="#jasmine">jasmine</a></li>
            <li><a href="#should">should</a></li>
            <li><a href="#memwatch">memwatch</a></li>
            <li><a href="#muk">muk</a></li>
            <li><a href="#rewire">rewire</a></li>
            <li><a href="#mocha">mocha</a></li>
            <li><a href="#istanbul">istanbul</a></li>
            <li><a href="#phantomjs">phantomjs</a></li>
            <li><a href="#browserstack">browserstack</a></li>
            <li><a href="#karma">karma</a></li>
            <li><a href="#jscover">jscover</a></li>
            <li><a href="#blanket">blanket</a></li>
          </ul>
        </li>
        <li><a href="#python">python</a></li>
        <li><a href="#go">go</a>
          <ul>
            <li><a href="#monkey">monkey</a></li>
          </ul>
        </li>
        <li><a href="#java">java</a>
          <ul>
            <li><a href="#hamcrest">hamcrest</a></li>
            <li><a href="#mockito">mockito</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#页面">页面</a></li>
    <li><a href="#移动">移动</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="基础">
  基础
  <a class="anchor" href="#%e5%9f%ba%e7%a1%80">#</a>
</h1>
<pre><code>方法
    TDD                     # Test-Driven Development
阶段
    单元测试阶段
        单元测试
    集成测试阶段            # 出厂测试
        冒烟测试            # 测主流程
        功能测试
            黑盒
            灰盒            # 集成测试阶段，黑盒但关注程序内部
            白盒
        回归测试
    系统测试阶段            # 第三方测试
    验收测试阶段
    性能测试                # PTS(Performance Testing Service)
        压力测试            # 系统失效的负载点
            常规模式        # 稳定并发
            梯度模式        # 并发梯度递增
            目标模式        # 并发梯度递增，达到预设指标(CPU、用户数、TPS、RT等)
        负载测试            # 满足性能指标情况下，最大负载
        疲劳强度测试        # 长时间执行最大工作量，保证持续业务量指标
        基准测试            # 统计多少时间内执行了多少次某个方法
        大数据量测试
            独立测试        # 针对存储、传输、统计、查询测试
            综合测试        # 大数据量下压测，负载，疲劳结合
        全链路压测
灰度发布                    # 金丝雀发布
    A/B测试
    蓝绿测试    
前端测试
    structure/behavior(数据结构/行为)问题
        # 判断是否有此耦合，用一个测试验证: 是否为应用逻辑编写一个单元测试而不需要dom结构存在
        ## angular中没有这种问题，因为所有定位元素和处理事件的工作都是在angular内部完成的
        ## 在测试时创建dom，就增加了测试的复杂性。而且页面变化时有更多维护要做。访问dom的操作很慢，测试反馈时间长
</code></pre>
<h1 id="数据库">
  数据库
  <a class="anchor" href="#%e6%95%b0%e6%8d%ae%e5%ba%93">#</a>
</h1>
<pre><code>sysbench
    # mysql 压测
    --db-driver=mysql --mysql-host=visitor-bench.ctysoosgzk4k.rds.cn-north-1.amazonaws.com.cn --mysql-user=root --mysql-password=12345678 --threads=512 --events=1000000 --time=0 --report-interval=15 ./bench_visit_page_insert.lua run
</code></pre>
<h1 id="接口">
  接口
  <a class="anchor" href="#%e6%8e%a5%e5%8f%a3">#</a>
</h1>
<h2 id="jmeter">
  jmeter
  <a class="anchor" href="#jmeter">#</a>
</h2>
<pre><code>压测场景
    HEAP=&quot;-Xms1g -Xmx1g -XX:MaxMetaspaceSize=256m&quot;
    jmeter -n -t [jmx file] -l [results file] -e -o [Path to web report folder]
</code></pre>
<h2 id="loadrunner">
  loadrunner
  <a class="anchor" href="#loadrunner">#</a>
</h2>
<pre><code>    脚本参数
        get
            web_url(&quot;login&quot;,
                &quot;URL=http://192.168.0.14:9081/ryx-login/sso/login&quot;,
                &quot;Resource=0&quot;,
                &quot;RecContentType=text/html&quot;,
                &quot;Referer=&quot;,
                &quot;Snapshot=t1.inf&quot;,
                &quot;Mode=HTML&quot;,
                EXTRARES,
                &quot;Url=../ycls/img/banner1.jpg&quot;, ENDITEM,
                &quot;Url=../ycls/img/banner2.jpg&quot;, ENDITEM,
                &quot;Url=../ycls/img/banner3.jpg&quot;, ENDITEM,
                &quot;Url=../ycls/img/userinput.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/sawtooth.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/tip2.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/pwdinput.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/login_back.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/tip1.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/codeinput.png&quot;, ENDITEM,
                &quot;Url=../ycls/img/loading-small2.gif&quot;, ENDITEM,
                &quot;Url=/favicon.ico&quot;, &quot;Referer=&quot;, ENDITEM,
                LAST);

        post参数
            web_submit_data(&quot;getActivityParameter&quot;,
                &quot;Action=http://192.168.0.14:9081/tobacco/retail/lottery/getActivityParameter?jsonp=jQuery19109862107675272699_1401335732777&quot;,
                &quot;Method=POST&quot;,
                &quot;RecContentType=text/html&quot;,
                &quot;Referer=http://192.168.0.14:9081/tobacco/retail/index;jsessionid=7BBAFC6DE481FBCB1CB88D738BD7EE71&quot;,
                &quot;Snapshot=t6.inf&quot;,
                &quot;Mode=HTML&quot;,
                ITEMDATA,
                &quot;Name=requestType&quot;, &quot;Value=ajax&quot;, ENDITEM,
                LAST);

        post直接传数据
            web_custom_request(&quot;dataservice&quot;,
                &quot;URL=http://202.110.222.207:7080/rtserver/rest/resource/tobacco/dataservice&quot;,
                &quot;Method=POST&quot;,
                &quot;Resource=0&quot;,
                &quot;RecContentType=text/plain&quot;,
                &quot;Referer=&quot;,
                &quot;Snapshot=t1.inf&quot;,
                &quot;Mode=HTML&quot;,
                &quot;Body= {\&quot;trans_code\&quot;:\&quot;1006\&quot;,\&quot;end_date\&quot;:\&quot;20140701\&quot;,\&quot;source\&quot;:\&quot;appkey\&quot;,\&quot;data\&quot;:\&quot;eyJiZWdpbl9kYXRlIjoiMjAxNDA2MDEiLCJlbmRfZGF0ZSI6IjIwMTQwNzAxIiwicG9zX2lkIjoiODg1MDAzMTAiLCJzb3VyY2UiOiJhcHBrZXkiLCJjdXN0b21lcl9pZCI6IjM3MDExMjEwNzQ2NyIsImFjY2Vzc190b2tlbiI6IiJ9\&quot;,\&quot;begin_date\&quot;:\&quot;20140601\&quot;,\&quot;mac\&quot;:\&quot;123\&quot;,\&quot;pos_id\&quot;:\&quot;88500310\&quot;,\&quot;customer_id\&quot;:\&quot;370112107467\&quot;,\&quot;access_token\&quot;:\&quot;\&quot;}&quot;,
                LAST);
</code></pre>
<h2 id="phoenix">
  phoenix
  <a class="anchor" href="#phoenix">#</a>
</h2>
<pre><code>    介绍
            web自动化测试工具
    特点
            分布式执行
            无脚本模式执行
            无人值守模式执行
            自定模式执行
    模块
            数据维护模块
    部署模式
            server-client
                    仅windows下可用
                    socket通信
            web部署
                    server与client放到tomcat或webLogic下部署
                    http通信
                    web页面控制与监控client端执行

wireshark
siege
        siege -c 200 -r 100 http://www.google.com
                # 200并发，发送100次请求
tcpcopy
        # 基于tcp packets的请求复制工具, 在线流量导入到测试系统中
ab
        内网测试, apache自带的压力测试工具, 安装apache后在bin目录中找到
        ab -n1000 -c100 http://www.google.com/a.html
                # 100并发, 发送1000次请求
locust
        # 外网性能测试　
http_load
        # 压测
        http_load -rate 5 -seconds 10 http://www.baidu.com
                # -p 并发
                # -f 总计访问数
                # -r 每秒访问频率
                # -s 总计访问时间
yslow
        # firefox插件，网页性能测试工具
gatling
        # dsl脚本, 生成报表
wrk
        # 压测
        wrk -R5000 -d10s &quot;http://internal-rope-api-1875734411.cn-north-1.elb.amazonaws.com.cn/online_agents/1&quot;
swagger
        # 文档与测试用例
fortio
        # istio压测工具
hey
        # http压测
</code></pre>
<h2 id="js">
  js
  <a class="anchor" href="#js">#</a>
</h2>
<pre><code>heapdump
        # 堆内存快照
jslint
supertest
        # 测http接口
sinon.js
        # 非运行测试，延时测试等
vows
        # asynchronous BDD(behaviour drven development) for Node
chai
        # js断言
mock.js
        # 模拟生成接口假数据
</code></pre>
<h3 id="benchmark">
  benchmark
  <a class="anchor" href="#benchmark">#</a>
</h3>
<pre><code>介绍
        测试代码执行性能
使用
        var Benchmark = require('benchmark');
        var suite = new Benchmark.Suite;

        var int1 = function(str){
                return +str;
        };
        var int2 = function(str){
                return parseInt(str, 10);
        };
        var int3 = function(str){
                return Number(str);
        };
        // 开始测试
        var number = '100';
        suite
        .add('+', function(){
                int1(number);
        });
        .add('parseInt', function(){
                int2(number);
        });
        .add('Number', function(){
                int3(number);
        });
        .on('cycle', function(event){        // 每个测试跑完后输出信息
                console.log(String(event.target));
        })
        .on('complete', function(){
                console.log('Fastest is' + this.filter('fastest').pluck('name'));
        })
        .run({'async': true});                    // 这里async与时间计算有关，默认为true
</code></pre>
<h3 id="travis">
  travis
  <a class="anchor" href="#travis">#</a>
</h3>
<pre><code>介绍
    项目node版本测试，在基本依赖下跑
使用
    在travis上授权仓库，每当push代码到github, 会自动跑测试
    配置根目录下的.travis.yml文件来配置测试内容，如
        language: node_js
        node_js:
        -'0.8'
        -'0.10'
        -'0.11'
        script: make test
        services:
            mongodb
            # 一个使用了mongodb的nodejs应用，用0.8、0.10、0.11三个版本来跑，跑测试的命令是make test
    travis测试的项目，可以得到一个图片地址，显示项目当前的测试通过状态，把这个图片添加到项目的README中
</code></pre>
<h3 id="jasmine">
  jasmine
  <a class="anchor" href="#jasmine">#</a>
</h3>
<pre><code>介绍
    编写单元测试
使用
    describe(&quot;A suite&quot;, function(){
        var foo;
        beforeEach(function(){
                foo = 0;
                foo += 1;
        });
        afterEach(function(){
                foo = 0;
        });
        it(&quot;contains spec with an expectation&quot;, function(){
                expect(true).toBe(true);
        });
    });
</code></pre>
<h3 id="should">
  should
  <a class="anchor" href="#should">#</a>
</h3>
<pre><code>介绍
    兼容性测试
安装
    npm install should --save-dev
使用
var should = require('should');

user.should.have.property('name', 'jack')
    # should(user).have.property('name','jack');
user.should.have.property('pets').with.lengthOf(4);
    # 判断数组
should.not.exist(err);
should.exist(result);
result.bar.should.equal(foo);
(5).should.be.exactly(5).and.be.a.Number();
user.should.be.an.instanceOf(Object).and.have.property('name', 'jack');
this.obj.should.have.property('id').which.is.a.Number();
</code></pre>
<h3 id="memwatch">
  memwatch
  <a class="anchor" href="#memwatch">#</a>
</h3>
<pre><code>介绍
    监控内存leak, stats,leak在连续5次垃圾回收后内存没释放时触发, stats事件在垃圾回收时触发

o-&gt; 堆内存比较
var memwatch = require('memwatch')
var leakArray = []
var leak = function () {
    leakArray.push('leak' + Math.random())
}
var hd = new memwatch.HeapDiff()
for (var i = 0; i &lt; 10000; i++) {
    leak()
}

var diff = hd.end()
console.log(JSON.stringify(diff, null, 2))
</code></pre>
<h3 id="muk">
  muk
  <a class="anchor" href="#muk">#</a>
</h3>
<pre><code>var muk = require('muk')
before(function () {
    muk(fs, 'readFileSync', function (path, encoding) {
        throw new Error('mock readFileSync error')
    })
    muk(fs, 'readFile', function (path, encoding, callback) {
        process.nextTick(function () {
            # 模拟异步
            callback(new Error('mock readFile error'))
        })
    })
})

after(function () {
    muk.restore()
})
</code></pre>
<h3 id="rewire">
  rewire
  <a class="anchor" href="#rewire">#</a>
</h3>
<pre><code>介绍
    测试私有方法

o-&gt;
it('limit should return success', function () {
    var lib = rewire('../lib/index.js')
    var litmit = lib.__get__('limit')
    litmit(10).should.be.equal(10)
})
</code></pre>
<h3 id="mocha">
  mocha
  <a class="anchor" href="#mocha">#</a>
</h3>
<pre><code>介绍
    单元测试框架
命令
    mocha
        # --reporters 查看所有报告样式, 默认dot, 常用spec, json, html-cov
        # -R &lt;reporter&gt;采用某报告样式
        # -t &lt;ms&gt;设置超时时间
使用
    npm install -g mocha
    // package.json
    {
        &quot;scripts&quot;: {
            &quot;test&quot;: &quot;mocha test&quot;
            &quot;blanket&quot;: {
                &quot;pattern&quot;: &quot;//^((?!(node_modules|test)).)*$/&quot;,
                &quot;data-cover-flags&quot;: {
                    &quot;debug&quot;: false
                }
            }
        }
    }
    mocha test

o-&gt; bdd风格
describe('Array', function() {
    before(function() {})
        # 钩子函数还有after, beforeEach, afterEach
    it('should return -1 when not present', function (done) {
        [1,2,3].indexOf(4).should.equal(-1)
        this.timeout(500)
            # 500ms后超时
        done()
            # 用done来测试异步
    })
})

o-&gt; bdd风格
suite('Array', function() {
    setup(function () {})
        # 钩子函数还有teardown
    suite('$indexOf()', function () {
        test('should return -1 when not present', function() {
            assert.equal(-1, [1,2,3].indexOf(4))
        })
    })
})
</code></pre>
<h3 id="istanbul">
  istanbul
  <a class="anchor" href="#istanbul">#</a>
</h3>
<pre><code>介绍
    名字是依斯坦布尔，用来白盒覆盖用例测试
    支持的use cases有unit tests, browser tests, server side code embedding
使用
    instanbul cover test.js
</code></pre>
<h3 id="phantomjs">
  phantomjs
  <a class="anchor" href="#phantomjs">#</a>
</h3>
<pre><code>介绍
    前端测试工具
    webkit js测试工具，支持多web标准, dom, css, json, canvas和svg
o-&gt; 使用1
    npm install mocha-phantomjs
    mocha-phantomjs index.html

o-&gt; 使用2
    phantomjs hello.js

    // hello.js
    console.log('Hello, world');
    phantom.exit();
</code></pre>
<h3 id="browserstack">
  browserstack
  <a class="anchor" href="#browserstack">#</a>
</h3>
<pre><code>介绍
    前端测试工具
    内建webdriver的api
使用
    npm install browserstack-runner --save-dev
    ./node_modules/.bin/browserstack-runner init
    // browserstack.json
        &quot;test_framework&quot;: &quot;mocha&quot;,
        &quot;timeout&quot;: 60,
        &quot;test_path&quot;: &quot;public/index.html&quot;
    https://www.browserstack.com/accounts/automate
        得到username 和 access key
        复制到browserstack.json中的username和key
    browserstack-runner
    https://www.browserstack.com/automate 查看结果
</code></pre>
<h3 id="karma">
  karma
  <a class="anchor" href="#karma">#</a>
</h3>
<pre><code>介绍
    是google Testacular的新名字，自动化完成单元测试
使用
    npm install -g karma
    karma start
    karma init
        # 初始化karma配置文件
    npm install karma-jasmine
</code></pre>
<h3 id="jscover">
  jscover
  <a class="anchor" href="#jscover">#</a>
</h3>
<pre><code>介绍
    覆盖率测试
使用
    npm install jscover -g
    jscover lib lib-cov
        # 把lib下的源码编译到lib-cov下，新代码在每一行加上了执行次数统计
    index.js中
        module.exports = process.env.LIB_COV ? require('./lib-cov/index') : require('./lib/index')
    export LIB_COV=1
    mocha -R html-cov &gt; coverage.html
        # 生成结果
</code></pre>
<h3 id="blanket">
  blanket
  <a class="anchor" href="#blanket">#</a>
</h3>
<pre><code>介绍
    比jscover更好的测试工具
使用
    package.json中
        &quot;scripts&quot;: {
            &quot;blanket&quot;: {
                &quot;pattern&quot;: &quot;eventproxy/lib&quot;
                    # 要测试的源码目录
            }
        }
    mocha --require blanket -R html-cov &gt; coverage.html
</code></pre>
<h2 id="python">
  python
  <a class="anchor" href="#python">#</a>
</h2>
<pre><code>nose
    # 注解测试
selenium
    # 自动化测试
</code></pre>
<h2 id="go">
  go
  <a class="anchor" href="#go">#</a>
</h2>
<pre><code>gomock
    # 官方mock库, 对接口mock
</code></pre>
<h3 id="monkey">
  monkey
  <a class="anchor" href="#monkey">#</a>
</h3>
<pre><code>介绍
    对函数mock
Patch()
Unpatch()
PatchInstanceMethod()
UnpatchInstanceMethod()

问题
    内联函数不能mock
        测试时禁止内联, go test -gcflags=all=&quot;-N -l&quot;
</code></pre>
<h2 id="java">
  java
  <a class="anchor" href="#java">#</a>
</h2>
<h3 id="hamcrest">
  hamcrest
  <a class="anchor" href="#hamcrest">#</a>
</h3>
<pre><code># 自然语法
</code></pre>
<h3 id="mockito">
  mockito
  <a class="anchor" href="#mockito">#</a>
</h3>
<h1 id="页面">
  页面
  <a class="anchor" href="#%e9%a1%b5%e9%9d%a2">#</a>
</h1>
<pre><code>jsperf
    # js性能分析
jasmine
    # js单元测试
</code></pre>
<h1 id="移动">
  移动
  <a class="anchor" href="#%e7%a7%bb%e5%8a%a8">#</a>
</h1>
<pre><code>robotium
    # android自动化测试
</code></pre>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/outrunJ/hugo-blog/commit/0b53334e3a62d27d50f9cf8568e7b2b8d41f9b64" title='Last modified by outrun | Sep 14, 2022' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="" />
      <span>Sep 14, 2022</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/outrunJ/hugo-blog/tree/master/content/content/docs/tool/test/_index.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#基础">基础</a></li>
    <li><a href="#数据库">数据库</a></li>
    <li><a href="#接口">接口</a>
      <ul>
        <li><a href="#jmeter">jmeter</a></li>
        <li><a href="#loadrunner">loadrunner</a></li>
        <li><a href="#phoenix">phoenix</a></li>
        <li><a href="#js">js</a>
          <ul>
            <li><a href="#benchmark">benchmark</a></li>
            <li><a href="#travis">travis</a></li>
            <li><a href="#jasmine">jasmine</a></li>
            <li><a href="#should">should</a></li>
            <li><a href="#memwatch">memwatch</a></li>
            <li><a href="#muk">muk</a></li>
            <li><a href="#rewire">rewire</a></li>
            <li><a href="#mocha">mocha</a></li>
            <li><a href="#istanbul">istanbul</a></li>
            <li><a href="#phantomjs">phantomjs</a></li>
            <li><a href="#browserstack">browserstack</a></li>
            <li><a href="#karma">karma</a></li>
            <li><a href="#jscover">jscover</a></li>
            <li><a href="#blanket">blanket</a></li>
          </ul>
        </li>
        <li><a href="#python">python</a></li>
        <li><a href="#go">go</a>
          <ul>
            <li><a href="#monkey">monkey</a></li>
          </ul>
        </li>
        <li><a href="#java">java</a>
          <ul>
            <li><a href="#hamcrest">hamcrest</a></li>
            <li><a href="#mockito">mockito</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#页面">页面</a></li>
    <li><a href="#移动">移动</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












