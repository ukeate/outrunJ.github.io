<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>安全 on outrun的笔记</title>
    <link>https://runout.run/categories/%E5%AE%89%E5%85%A8/</link>
    <description>Recent content in 安全 on outrun的笔记</description>
    <generator>Hugo</generator>
    <language>en</language>
    <lastBuildDate>Mon, 01 Aug 2022 13:53:50 +0800</lastBuildDate>
    <atom:link href="https://runout.run/categories/%E5%AE%89%E5%85%A8/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Security</title>
      <link>https://runout.run/docs/architect/code/security/</link>
      <pubDate>Thu, 11 Oct 2018 18:47:57 +0800</pubDate>
      <guid>https://runout.run/docs/architect/code/security/</guid>
      <description>&lt;h1 id=&#34;服务器&#34;&gt;&#xA;  服务器&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%9c%8d%e5%8a%a1%e5%99%a8&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h1&gt;&#xA;&lt;h2 id=&#34;木马&#34;&gt;&#xA;  木马&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%9c%a8%e9%a9%ac&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;自变异木马&#xA;    改变自身hash或将自身大量复制到不同目录, 后台运行，躲避清理&#xA;    自删除&#xA;    伪装成系统程序或绑定系统程序&#xA;检查&#xA;    可疑进程&#xA;    定时任务&#xA;    启动项&#xA;        /etc/init.d或service --status-all&#xA;        systemctl list-unit-files | grep enabled&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;经验&#34;&gt;&#xA;  经验&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e7%bb%8f%e9%aa%8c&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;libudev.so                      # 自变异，/bin/下生成随机名称命令, 启动后可远程执行命令，在/etc/init.d下创建自启动项，在/etc/crontab中添加定时任务&#xA;    chmod 0000 /lib/libudev.so &amp;amp;&amp;amp; rm -rf /lib/libudev.so &amp;amp;&amp;amp; chattr +i /lib/&#xA;    /etc/init.d下随机名称文件删除, /etc/rc{0,1,2,3,4,5,6,S}.d中的软链删除&#xA;    /etc/crontab/gcc.sh删除&#xA;    sed &#39;/gcc.sh/d&#39; /etc/crontab &amp;amp;&amp;amp; chmod 0000 /etc/crontab &amp;amp;&amp;amp; chattr +i /etc/crontab 删除定时任务&#xA;    重启&#xA;    chattr -i /lib /etc/crontab 恢复可写&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;ddos&#34;&gt;&#xA;  DDoS&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#ddos&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;h2 id=&#34;防范方法&#34;&gt;&#xA;  防范方法&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e9%98%b2%e8%8c%83%e6%96%b9%e6%b3%95&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;h3 id=&#34;漏洞扫描&#34;&gt;&#xA;  漏洞扫描&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%bc%8f%e6%b4%9e%e6%89%ab%e6%8f%8f&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;pre&gt;&lt;code&gt;DVWA&#xA;    # Damn Vulnerable Web Application，PHP + MySQL模拟Web漏洞&#xA;W3af&#xA;    # Web应用扫描, Python实现&#xA;OpenVAS&#xA;    # 扫描主机漏洞&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h3 id=&#34;网络隔离&#34;&gt;&#xA;  网络隔离&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e7%bd%91%e7%bb%9c%e9%9a%94%e7%a6%bb&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;pre&gt;&lt;code&gt;内外网分离&#xA;登录跳板机&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1 id=&#34;web安全&#34;&gt;&#xA;  Web安全&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#web%e5%ae%89%e5%85%a8&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h1&gt;&#xA;&lt;h2 id=&#34;xss&#34;&gt;&#xA;  XSS&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#xss&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;# 向网页注入代码&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;csrf&#34;&gt;&#xA;  CSRF&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#csrf&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;# Cross-Site Request Forgery, 跨站请求伪造&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;sql注入&#34;&gt;&#xA;  SQL注入&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#sql%e6%b3%a8%e5%85%a5&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;h2 id=&#34;hash-dos&#34;&gt;&#xA;  Hash Dos&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#hash-dos&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;上传大Json Object, 利用Hash算法的伪随机性，制造Value不同但Hash碰撞的数据，耗尽CPU&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;上传文件脚本&#34;&gt;&#xA;  上传文件脚本&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e4%b8%8a%e4%bc%a0%e6%96%87%e4%bb%b6%e8%84%9a%e6%9c%ac&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;伪造Content-Type上传静态资源，再URL访问执行&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;防范方法-1&#34;&gt;&#xA;  防范方法&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e9%98%b2%e8%8c%83%e6%96%b9%e6%b3%95-1&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;h3 id=&#34;验证码&#34;&gt;&#xA;  验证码&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e9%aa%8c%e8%af%81%e7%a0%81&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;pre&gt;&lt;code&gt;根据滑动响应时间、拖拽速度、时间、位置、轨迹、重试次数来评估风险&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h3 id=&#34;信息存储&#34;&gt;&#xA;  信息存储&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e4%bf%a1%e6%81%af%e5%ad%98%e5%82%a8&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;pre&gt;&lt;code&gt;密码非明文保存，加salt&#xA;身份证号、手机号加&amp;quot;*&amp;quot;&#xA;联系方式显示与否用户自己配置&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h3 id=&#34;加密&#34;&gt;&#xA;  加密&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%8a%a0%e5%af%86&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;pre&gt;&lt;code&gt;对称加密&#xA;    DES             # 56位秘钥，已被AES取代&#xA;    3DES            # 做3次DES&#xA;    AES             # 128、192、256位秘钥&#xA;    Blowfish        # 1到448位变长秘钥&#xA;非对称加密&#xA;    RSA             #&#xA;    DSA             # 性能快于RSA，只能数字签名&#xA;    ECDSA           # 螺旋曲线加密算法&#xA;    ECC             # 256位ECC秘钥相当于3072位RSA秘钥&#xA;哈希算法&#xA;    MD5             # 不再安全&#xA;    SHA-1           # 不再安全&#xA;    SHA-256&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h3 id=&#34;授权认证&#34;&gt;&#xA;  授权、认证&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%8e%88%e6%9d%83%e8%ae%a4%e8%af%81&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h3&gt;&#xA;&lt;pre&gt;&lt;code&gt;RBAC、ABAC&#xA;SSO&#xA;OAuth2.0&#xA;OIDC&#xA;    # OpenId Connect，OAuth2上构建的身份认证&#xA;SAML&#xA;    # Security Assertion Markup Language&#xA;    用于SSO，XML格式&#xA;    定义了三个角色：委托人、身份提供者(IDP)、服务提供者(SP)。用户SP做访问控制&#xA;2FA&#xA;    # Two-factor authentication, 双因素认证&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1 id=&#34;代码安全&#34;&gt;&#xA;  代码安全&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e4%bb%a3%e7%a0%81%e5%ae%89%e5%85%a8&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h1&gt;&#xA;&lt;h2 id=&#34;java反序列化漏洞&#34;&gt;&#xA;  Java反序列化漏洞&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#java%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96%e6%bc%8f%e6%b4%9e&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;用户输入直接反序列化，可利用Apache Commons Collections执行任意代码&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1 id=&#34;数据安全&#34;&gt;&#xA;  数据安全&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%95%b0%e6%8d%ae%e5%ae%89%e5%85%a8&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h1&gt;&#xA;&lt;h2 id=&#34;数据备份&#34;&gt;&#xA;  数据备份&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%95%b0%e6%8d%ae%e5%a4%87%e4%bb%bd&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;h1 id=&#34;问题定义与排查方法&#34;&gt;&#xA;  问题定义与排查方法&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e9%97%ae%e9%a2%98%e5%ae%9a%e4%b9%89%e4%b8%8e%e6%8e%92%e6%9f%a5%e6%96%b9%e6%b3%95&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h1&gt;&#xA;&lt;h2 id=&#34;基础&#34;&gt;&#xA;  基础&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%9f%ba%e7%a1%80&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;线上故障等级&#xA;&#x9;P0 致命问题&#xA;&#x9;P1 严重问题&#xA;&#x9;P2 一般问题&#xA;&#x9;P3 轻微问题&#xA;线上故障分类&#xA;&#x9;外部依赖类&#xA;&#x9;运营质量类&#xA;&#x9;需求质量类&#xA;&#x9;系统质量类&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;混沌工程&#34;&gt;&#xA;  混沌工程&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%b7%b7%e6%b2%8c%e5%b7%a5%e7%a8%8b&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;混沌工程画像&#xA;&#x9;ApplicationData&#xA;&#x9;&#x9;进程Hang、Kill，启动异常，心跳异常，环境错误，包错误或损坏，配置错误、误删、获取超时&#xA;&#x9;Data&#xA;&#x9;&#x9;系统单点，异步阻塞同步，依赖超时，依赖异常，业务线程池满，监控错误，OOM&#xA;&#x9;Runtime&#xA;&#x9;&#x9;负载均衡失效，缓存热点，缓存限流&#xA;&#x9;Middleware&#xA;&#x9;&#x9;数据库热点，数据库宕机，数据同步延迟，数据库主备延迟，数据库连接满，数据库热点&#xA;&#x9;OS&#xA;&#x9;&#x9;CPU抢占，内存抢占，内存错乱，上下文切换&#xA;&#x9;Virtualization&#xA;&#x9;&#x9;服务器宕机、假死，断电，超卖，混部&#xA;&#x9;Storage&#xA;&#x9;&#x9;磁盘满、慢、坏，不可写，不可读&#xA;&#x9;Networking&#xA;&#x9;&#x9;网络抖动、丢包、超时，网卡满，断网&#xA;工具&#xA;&#x9;ChaosBlade&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;java&#34;&gt;&#xA;  Java&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#java&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;Idea Debugger&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;redis&#34;&gt;&#xA;  Redis&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#redis&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;h2 id=&#34;mysql&#34;&gt;&#xA;  MySQL&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#mysql&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;Using intersect&#xA;&#x9;多余查询条件虽然命中索引，但会产生多余的索引查询使SQL变慢，应该使用唯一的单值索引&#xA;force index指定期望的索引&#xA;用count(*)不要count(1)&#xA;use filesort可能会文件排序&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h2 id=&#34;trace&#34;&gt;&#xA;  Trace&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#trace&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h2&gt;&#xA;&lt;pre&gt;&lt;code&gt;Pinpoint记录&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;h1 id=&#34;各开源协议&#34;&gt;&#xA;  各开源协议&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%90%84%e5%bc%80%e6%ba%90%e5%8d%8f%e8%ae%ae&#34;&gt;#&lt;/a&gt;&#xA;&lt;/h1&gt;&#xA;&lt;pre&gt;&lt;code&gt;GPL&#xA;    介绍&#xA;        GNU General Public License，GNU发布的通用协议，共3个版本，最新为GPLv3，Linux使用此协议&#xA;    特点&#xA;        发布的软件使用GPL的软件, 也要GPL&#xA;LGPL&#xA;    介绍&#xA;        GNU Lesser General Public License，OpenOffice使用此协议&#xA;    特点&#xA;        类库引用可不开源，有代码修改要使用LGPL开源&#xA;AGPL&#xA;    介绍&#xA;        Affero General Public License。类似的协议有CPAL、OSL&#xA;    特点&#xA;        除发布的软件，提供服务的软件，也要AGPL&#xA;BSD&#xA;    介绍&#xA;        Berkly Software Distribution&#xA;    特点&#xA;        可以自由修改，修改可再次闭源发布。只需要BSD许可协议文件，但不能使用原作者名义宣传&#xA;MPL&#xA;    介绍&#xA;        The Mozilla Public License&#xA;    特点&#xA;        可与其它授权的文件混合使用，新增代码可使用其它方式授权或闭源&#xA;        使用MPL的部分，对MPL修改的部分，要MPL&#xA;MIT&#xA;    介绍&#xA;        近1/3的开源 软件使用。如ssh, JQuery, Putty，XWindow&#xA;    特点&#xA;        类似BSD，可使用原作者名义推广&#xA;Apache2.0&#xA;    介绍&#xA;        软件有Android, Apache Web Server, Swift&#xA;    特点&#xA;        类似BSD，被修改的原始文件要著名版权&#xA;&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
  </channel>
</rss>
